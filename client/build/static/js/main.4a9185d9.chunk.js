(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{362:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),c=n.n(i),o=(n(362),n(633)),s=n(313),l=Object(s.a)({typography:{fontFamily:'"Open Sans", "sans-serif", "Roboto"',fontSize:12,button:{textTransform:"none",fontWeight:700}},palette:{primary:{main:"#f04040"}},shape:{borderRadius:5}}),u=n(40),d=n(43),p=n(624),h=n(320),j=n(637),m=n(614),b=n(321),x=n(3),g=n(599),f=Object(g.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)",width:"99%",margin:"0 auto"}},loginOuterContainer:Object(x.a)({},e.breakpoints.down("sm"),{padding:e.spacing(0)}),loginContainer:Object(x.a)({padding:e.spacing(5,15),borderRadius:e.shape.borderRadius,height:"700px"},e.breakpoints.down(768),{padding:e.spacing(5)}),welcome:{fontSize:26,paddingBottom:20,color:"#000000",fontWeight:700,fontFamily:"'Open Sans'",textAlign:"center"}}})),O=n(11),v=n.n(O),y=n(17),w=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n}),credentials:"include"},e.next=3,fetch("/auth/login",a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=n(604),k=n(649),C=n(50),S=n(30),I=n(612),B=Object(g.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},label:{fontSize:19,color:"#000000",fontWeight:700,paddingLeft:"5px",textTransform:"uppercase"},inputs:{marginTop:".8rem",height:"2rem",padding:"12px",border:"1px solid #dddddd",borderRadius:e.shape.borderRadius},inputsPassword:{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"0"},forgot:{border:"1px solid #dddddd",borderRadius:e.shape.borderRadius,borderTopLeftRadius:"0",borderBottomLeftRadius:"0",color:"#3a8dff",height:"58px",lineHeight:"58px",marginTop:".8rem",padding:"0 10px"},submit:Object(x.a)({margin:e.spacing(2),padding:10,width:200,height:45,borderRadius:e.shape.borderRadius,marginTop:10,fontSize:14,backgroundColor:e.palette.primary.main,color:"#ffffff",fontWeight:700,textTransform:"uppercase"},e.breakpoints.down("xs"),{width:"100%",margin:"24px auto 0"}),demoLoginBtn:{backgroundColor:"#ffffff",color:e.palette.primary.main},underline:{"&&:after":{borderBottom:"2px solid rgba(0, 0, 0, 0.87)",width:"99%",margin:"0 auto"}},errorOffset:{paddingBottom:"20px",marginBottom:"8px"}}})),T=n(603),R=n(5),W=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/user",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/auth/logout",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=n(303),M=n(1),A=Object(a.createContext)({socket:void 0,initSocket:function(){return null}}),F=function(e){var t=e.children,n=Object(a.useState)(void 0),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(a.useCallback)((function(){var e;if(c((function(t){return e=t,t})),!e){var t=Object(D.io)("/",{withCredentials:!0});t.on("connect",(function(){})),c(t)}}),[]);return Object(M.jsx)(A.Provider,{value:{socket:i,initSocket:o},children:t})};function E(){return Object(a.useContext)(A)}var U=Object(a.createContext)({loggedInUser:void 0,updateLoginContext:function(){return null},logout:function(){return null}}),H=function(e){var t=e.children,n=Object(a.useState)(),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(d.g)(),s=E().socket,l=Object(a.useCallback)((function(e){c(e.user),o.push("/dashboard")}),[o]),u=Object(a.useCallback)(Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P().then((function(){c((function(e){return e&&(null===s||void 0===s||s.emit("logout",null===e||void 0===e?void 0:e.id)),e})),o.push("/login"),c(null)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)}))),[o,s]);return Object(a.useEffect)((function(){(function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().then((function(e){e.success?(l(e.success),c((function(e){return e&&(null===s||void 0===s||s.emit("go-online",null===e||void 0===e?void 0:e.id),null===s||void 0===s||s.emit("join-room",null===e||void 0===e?void 0:e.id)),e})),o.push("/dashboard")):(c(null),o.push("/login"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,o,s]),Object(M.jsx)(U.Provider,{value:{loggedInUser:i,updateLoginContext:l,logout:u},children:t})};function z(){return Object(a.useContext)(U)}var L=n(648),q=n(602),V=n(304),G=n.n(V),J=Object(a.createContext)({updateSnackBarMessage:function(){return null}}),K=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),s=Object(R.a)(o,2),l=s[0],u=s[1],d=Object(a.useCallback)((function(e){c(e),u(!0)}),[]),p=Object(a.useCallback)((function(){u(!1)}),[]),h=Object(a.useCallback)((function(e,t){"clickaway"!==t&&u(!1)}),[]);return Object(M.jsxs)(J.Provider,{value:{updateSnackBarMessage:d},children:[t,Object(M.jsx)(L.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:l,autoHideDuration:6e3,onClose:h,message:i,action:Object(M.jsx)(q.a,{size:"small","aria-label":"close",color:"inherit",onClick:p,children:Object(M.jsx)(G.a,{fontSize:"small"})})})]})};function Y(){return Object(a.useContext)(J)}var Z="demoUser@gmail.com",Q="123123";function X(e){var t=e.isMenuItem,n=e.classes,a=z().updateLoginContext,r=Y().updateSnackBarMessage,i=function(){w(Z,Q).then((function(e){e.error?r(e.error.message):e.success?a(e.success):(console.error({data:e}),r("An unexpected error occurred. Please try again"))}))};return Object(M.jsx)(M.Fragment,{children:t?Object(M.jsx)(T.a,{className:n,onClick:i,children:"Demo User"}):Object(M.jsx)(N.a,{size:"large",className:n,color:"primary",variant:"outlined",onClick:i,children:"Demo User Login"})})}function _(e){var t=e.handleSubmit,n=B();return Object(M.jsx)(C.b,{initialValues:{email:"",password:""},validationSchema:S.c().shape({email:S.d().required("Email is required").email("Email is not valid"),password:S.d().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,a=e.handleChange,r=e.values,i=e.touched,c=e.errors,o=e.isSubmitting;return Object(M.jsxs)("form",{onSubmit:t,className:n.form,noValidate:!0,children:[Object(M.jsx)(k.a,{className:"".concat(!(i.email&&Boolean(c.email))&&n.errorOffset),id:"email",label:Object(M.jsx)(b.a,{className:n.label,children:"Email Address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs,underline:n.underline}},name:"email",autoComplete:"email",autoFocus:!0,helperText:i.email?c.email:"",error:i.email&&Boolean(c.email),value:r.email,onChange:a,placeholder:"Enter your email"}),Object(M.jsx)(k.a,{className:"".concat(!(i.password&&Boolean(c.password))&&n.errorOffset),id:"password",label:Object(M.jsx)(b.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:"".concat(n.inputs," ").concat(n.inputsPassword),underline:n.underline},endAdornment:Object(M.jsx)(b.a,{className:n.forgot,children:"Forgot?"})},type:"password",autoComplete:"current-password",helperText:i.password?c.password:"",error:i.password&&Boolean(c.password),value:r.password,onChange:a,placeholder:"Enter your password"}),Object(M.jsxs)(j.a,{textAlign:"center",children:[Object(M.jsx)(X,{classes:"".concat(n.submit," ").concat(n.demoLoginBtn)}),Object(M.jsx)(N.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:o?Object(M.jsx)(I.a,{style:{color:"white"}}):"Login"})]}),Object(M.jsx)("div",{style:{height:95}})]})}})}var $=Object(g.a)((function(e){return{authHeader:{padding:e.spacing(1,3),borderBottom:"1px solid #eee",backgroundColor:"#fff"}}})),ee="data:image/png;base64,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",te=n(317),ne=n(189),ae=n.n(ne),re=Object(g.a)((function(e){return{authMobileMenus:Object(x.a)({},e.breakpoints.up("sm"),{display:"none"}),displayAuthMenus:{display:"block"},menuItem:{textTransform:"uppercase",justifyContent:"center"},menuItemDesktop:Object(x.a)({},e.breakpoints.up(768),{display:"none"})}})),ie=n(654),ce=function(e){var t=e.user;return Object(M.jsx)(ie.a,{alt:"Profile Image",src:"https://robohash.org/".concat(null===t||void 0===t?void 0:t.email,".png")})},oe=function(){var e=re(),t=Object(d.g)(),n=Object(d.h)(),r=Object(a.useState)(null),i=Object(R.a)(r,2),c=i[0],o=i[1],s=Boolean(c),l=z(),u=l.loggedInUser,p=l.logout,h=function(){o(null)},m=function(e){h(),t.push(e)};return Object(M.jsxs)(j.a,{className:"".concat(e.authMobileMenus," ").concat(u&&e.displayAuthMenus),children:[Object(M.jsx)(q.a,{"aria-label":"show auth menu","aria-controls":"auth-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},children:"/login"===n.pathname||"/signup"===n.pathname?Object(M.jsx)(ae.a,{}):Object(M.jsx)(ce,{loggedIn:!0,user:u})}),Object(M.jsx)(te.a,{id:"auth-menu",anchorEl:c,keepMounted:!0,open:s,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null,children:u?Object(M.jsxs)(j.a,{children:[Object(M.jsx)(T.a,{className:"".concat(e.menuItem," ").concat(e.menuItemDesktop),onClick:function(){return m("/listings")},children:"Listings"}),Object(M.jsx)(T.a,{className:"".concat(e.menuItem," ").concat(e.menuItemDesktop),onClick:function(){return m("/bookings")},children:"Bookings"}),Object(M.jsx)(T.a,{className:"".concat(e.menuItem," ").concat(e.menuItemDesktop),onClick:function(){return m("/messages")},children:"Messages"}),Object(M.jsx)(T.a,{className:e.menuItem,onClick:function(){return m("/profile")},children:"Profile"}),Object(M.jsx)(T.a,{className:e.menuItem,onClick:function(){h(),p()},children:"Logout"})]}):Object(M.jsxs)(j.a,{children:[Object(M.jsx)(X,{isMenuItem:!0,classes:e.menuItem}),Object(M.jsx)(T.a,{className:e.menuItem,onClick:function(){return m("/login")},children:"Login"}),Object(M.jsx)(T.a,{className:e.menuItem,onClick:function(){return m("/signup")},children:"Sign Up"})]})})]})},se=Object(g.a)((function(e){var t;return{authMenuDesktop:Object(x.a)({},e.breakpoints.down(600),{display:"none"}),accAside:(t={color:"#000000",fontWeight:700,marginRight:35,whiteSpace:"nowrap",display:"flex",padding:"1rem 0",textDecoration:"underline",textTransform:"uppercase"},Object(x.a)(t,e.breakpoints.down(600),{display:"none"}),Object(x.a)(t,e.breakpoints.down(769),{marginRight:12}),t),authNavItemBtn:{fontSize:16,color:"#000000",fontWeight:900,marginRight:35,textDecoration:"none"},authNavMobile:Object(x.a)({},e.breakpoints.down(768),{display:"none"}),headerBtn:{width:140,height:45,borderRadius:e.shape.borderRadius,boxShadow:"none",marginRight:12,textTransform:"uppercase"},loginBtn:{backgroundColor:"#ffffff",color:e.palette.primary.main},signupBtn:{backgroundColor:e.palette.primary.main,color:"#ffffff"}}})),le=function(e){var t=e.isButton,n=e.linkTo,a=e.classes,r=e.asideText,i=e.btnText,c=e.variant;return Object(M.jsx)(M.Fragment,{children:t?Object(M.jsx)(N.a,{component:u.c,to:n,className:a,activeStyle:"contained"===c?{color:"#ffffff"}:{color:"#f04040"},color:"primary",variant:c,children:i}):Object(M.jsx)(b.a,{className:a,component:u.c,to:n,activeStyle:{color:"#f04040"},children:r})})},ue=n(658),de=n(524),pe=Object(g.a)((function(e){return{authNavItemBtn:{fontSize:16,color:"#000000 !important",fontWeight:900,textDecoration:"none"},authNavMobile:Object(x.a)({},e.breakpoints.down(768),{display:"none"}),popoverWrap:{minWidth:"700px"},wrap:{marginRight:"35px !important"}}})),he=n(657),je=n(655),me=Object(g.a)((function(e){return Object(je.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",minWidth:400},image:{width:60,height:60},title:{fontWeight:900},footerWrap:{display:"flex",justifyContent:"flex-end"},popoverWrap:{minWidth:"450px"}})})),be=n(243),xe=n.p+"static/media/68f55f7799df6c8078a874cfe0a61a5e6e9e1687.bd1e0038.png",ge=Object(g.a)((function(e){return Object(je.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",minWidth:400},image:{width:60,height:60},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},title:{fontWeight:900},type:{fontSize:"10px",color:"light-grey"},date:{fontWeight:900},unread:{backgroundColor:"lightgrey",marginBottom:"10px"},read:{backgroundColor:"white",marginBottom:"10px"}})})),fe=n(613);function Oe(e){var t=e.messagesToShow,n=ge();return Object(M.jsx)(j.a,{className:n.root,children:t.map((function(e){return Object(M.jsxs)(j.a,{className:e.read?n.read:n.unread,children:[Object(M.jsx)(fe.a,{}),Object(M.jsxs)(m.a,{container:!0,spacing:1,children:[Object(M.jsx)(m.a,{item:!0,children:Object(M.jsx)(be.a,{className:n.image,children:Object(M.jsx)("img",{className:n.img,alt:"complex",src:xe})})}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:!0,container:!0,children:Object(M.jsx)(m.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:Object(M.jsxs)(m.a,{item:!0,xs:!0,children:[Object(M.jsx)(b.a,{variant:"subtitle1",className:n.title,children:e.title}),Object(M.jsx)(b.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",className:n.type,children:e.type}),Object(M.jsx)(b.a,{variant:"body2",gutterBottom:!0,className:n.date,children:new Date(e.createdAt).toLocaleDateString("en-US")})]})})})]})]},e._id)}))})}var ve=n(305),ye=n.n(ve),we=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,title:n,description:a}),credentials:"include"},e.prev=1,e.next=4,fetch("/notification",r);case 4:return i=e.sent,e.abrupt("return",i.json());case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var r,i,c,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"},i="/notification/?",t>=0&&(i=i.concat("page=".concat(t,"&"))),n>=0&&(i=i.concat("limit=".concat(n,"&"))),a&&(i=i.concat("unread=true")),e.prev=5,e.next=8,fetch(i,r);case 8:return c=e.sent,e.next=11,c.json();case 11:return o=e.sent,s=o.success,e.abrupt("return",s);case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,r,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"},a="/notification/count",t&&(a=a.concat("?unread=true")),e.prev=3,e.next=6,fetch(a,n);case 6:return r=e.sent,e.next=9,r.json();case 9:return i=e.sent,c=i.success,e.abrupt("return",c);case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationsToUpd:t}),credentials:"include"},e.prev=1,e.next=4,fetch("/notification",n);case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();function Se(e){e.updateCount;var t=me(),n=function(e){return e.notifications},i=r.a.useState([]),c=Object(R.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){(function(){var e=Object(y.a)(v.a.mark((function e(){var t,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(1,3,!0);case 2:if(t=e.sent,(a=n(t))&&s(a),!(a.length>0)){e.next=9;break}return r=a.map((function(e){return e._id})),e.next=9,Ce(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(M.jsx)(j.a,{className:"".concat(t.root," ").concat(t.popoverWrap),children:Object(M.jsxs)(h.a,{className:t.paper,children:[o.length<1?Object(M.jsx)(j.a,{children:Object(M.jsx)(b.a,{variant:"subtitle1",className:t.title,children:"No unread notifications."})}):Object(M.jsx)(Oe,{messagesToShow:o}),Object(M.jsx)(j.a,{className:t.footerWrap,children:Object(M.jsxs)(N.a,{component:u.c,to:"/notifications",children:["Show all notifications",Object(M.jsx)(ye.a,{})]})})]})})}var Ie=n(646);function Be(e){var t=e.notifCount,n=e.updateCount,r=pe(),i=a.useState(null),c=Object(R.a)(i,2),o=c[0],s=c[1],l=Boolean(o),u=l?"simple-popover":void 0;return Object(M.jsxs)(he.a,{className:r.wrap,children:[Object(M.jsx)(Ie.a,{color:"primary",badgeContent:t,max:99,children:Object(M.jsx)(de.a,{"aria-describedby":u,onClick:function(e){s(o?null:e.currentTarget),n(3)},className:"".concat(r.authNavItemBtn," ").concat(r.authNavMobile),color:"secondary",variant:"text",children:"Notification"})}),Object(M.jsx)(ue.a,{id:"mouse-over-popover",open:l,anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:function(){s(null)},children:Object(M.jsx)(Se,{updateCount:n})})]})}var Te=function(e){var t=e.asideText,n=e.linkTo,a=e.notifCount,r=e.updateCount,i=se(),c=z().loggedInUser;return Object(M.jsxs)(j.a,{display:"flex",justifyContent:"center",alignItems:"center",className:i.authMenuDesktop,children:[Object(M.jsx)(le,{asideText:t,classes:"".concat(i.accAside," ").concat(i.authNavMobile),linkTo:n}),c?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Be,{notifCount:a,updateCount:r}),Object(M.jsx)(le,{isButton:!0,classes:"".concat(i.authNavItemBtn," ").concat(i.authNavMobile),linkTo:"/bookings",btnText:"Bookings",variant:"text"}),Object(M.jsx)(le,{isButton:!0,classes:"".concat(i.authNavItemBtn," ").concat(i.authNavMobile),linkTo:"/listings",btnText:"Listings",variant:"text"}),c.profileId&&Object(M.jsx)(le,{isButton:!0,classes:"".concat(i.authNavItemBtn," ").concat(i.authNavMobile),linkTo:"/messages",btnText:"Messages",variant:"text"})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(le,{isButton:!0,classes:"".concat(i.headerBtn," ").concat(i.loginBtn),linkTo:"/login",btnText:"Login",variant:"outlined"}),Object(M.jsx)(le,{isButton:!0,classes:"".concat(i.headerBtn," ").concat(i.signupBtn),linkTo:"/signup",btnText:"Sign Up",variant:"contained"})]})]})},Re=function(e){var t=e.asideText,n=e.linkTo,r=$(),i=z().loggedInUser,c=Object(a.useState)(0),o=Object(R.a)(c,2),s=o[0],l=o[1],d=E().socket,p=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.max(s-t,0),l(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===d||void 0===d||d.on("notification",(function(){l(s+1)})),Object(a.useEffect)((function(){(function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(!0);case 2:(t=e.sent)&&l(t.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(M.jsxs)(j.a,{width:"100%",height:"90px",display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",className:r.authHeader,children:[Object(M.jsx)(u.b,{to:i?"/dashboard":"/login",children:Object(M.jsx)("img",{src:ee,alt:"logo"})}),Object(M.jsxs)(j.a,{height:"80px",display:"flex",flexWrap:"wrap",alignItems:"center",p:1,children:[Object(M.jsx)(Te,{asideText:t,linkTo:n,notifCount:s,updateCount:p}),Object(M.jsx)(oe,{})]})]})};function We(){var e=f(),t=z().updateLoginContext,n=Y().updateSnackBarMessage;return Object(M.jsxs)(m.a,{container:!0,component:"main",className:e.root,children:[Object(M.jsx)(p.a,{}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:12,md:12,elevation:6,component:h.a,square:!0,children:Object(M.jsxs)(j.a,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",children:[Object(M.jsx)(Re,{asideText:"Don't have an account?",linkTo:"/signup"}),Object(M.jsx)(j.a,{className:e.loginOuterContainer,width:"100%",maxWidth:600,p:3,alignSelf:"center",children:Object(M.jsxs)(m.a,{className:e.loginContainer,container:!0,elevation:6,component:h.a,children:[Object(M.jsx)(m.a,{item:!0,xs:!0,children:Object(M.jsx)(b.a,{className:e.welcome,component:"h1",variant:"h5",children:"Welcome Back!"})}),Object(M.jsx)(_,{handleSubmit:function(e,a){var r=e.email,i=e.password,c=a.setSubmitting;w(r,i).then((function(e){e.error?(c(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),c(!1),n("An unexpected error occurred. Please try again"))}))}})]})}),Object(M.jsx)(j.a,{p:1,alignSelf:"center"})]})})]})}var Pe=Object(g.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)",width:"99%",margin:"0 auto"}},signupOuterContainer:Object(x.a)({},e.breakpoints.down("sm"),{padding:e.spacing(0)}),signupContainer:Object(x.a)({padding:e.spacing(5,15),borderRadius:e.shape.borderRadius,height:"700px"},e.breakpoints.down(768),{padding:e.spacing(5)}),welcome:{fontSize:26,paddingBottom:20,color:"#000000",fontWeight:700,fontFamily:"'Open Sans'",textAlign:"center"},alreadyMember:{fontWeight:700},loginText:{color:e.palette.primary.main,fontWeight:700}}})),De=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:a}),credentials:"include"},e.next=3,fetch("/auth/register",r).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Me=Object(g.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},label:{fontSize:19,color:"#000000",fontWeight:700,paddingLeft:"5px",textTransform:"uppercase"},inputs:{marginTop:".8rem",height:"2rem",padding:"12px",border:"1px solid #dddddd",borderRadius:e.shape.borderRadius},forgot:{marginTop:".8rem",paddingRight:10,color:"#3a8dff"},submit:Object(x.a)({margin:e.spacing(2),padding:10,width:200,height:45,borderRadius:e.shape.borderRadius,marginTop:10,fontSize:14,backgroundColor:e.palette.primary.main,color:"#ffffff",fontWeight:700,textTransform:"uppercase"},e.breakpoints.down("xs"),{width:"100%",margin:"24px auto 0"}),demoLoginBtn:{backgroundColor:"#ffffff",color:e.palette.primary.main},underline:{"&&:after":{borderBottom:"2px solid rgba(0, 0, 0, 0.87)",width:"99%",margin:"0 auto"}},errorOffset:{paddingBottom:"20px",marginBottom:"8px"}}})),Ae=function(e){var t=e.handleSubmit,n=Me();return Object(M.jsx)(C.b,{initialValues:{email:"",password:"",username:""},validationSchema:S.c().shape({username:S.d().required("Username is required").max(40,"Username is too long"),email:S.d().required("Email is required").email("Email is not valid"),password:S.d().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:t,children:function(e){var t=e.handleSubmit,a=e.handleChange,r=e.values,i=e.touched,c=e.errors,o=e.isSubmitting;return Object(M.jsxs)("form",{onSubmit:t,className:n.form,noValidate:!0,children:[Object(M.jsx)(k.a,{className:"".concat(!(i.email&&Boolean(c.email))&&n.errorOffset),id:"email",label:Object(M.jsx)(b.a,{className:n.label,children:"Email Address"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs,underline:n.underline}},name:"email",autoComplete:"email",autoFocus:!0,helperText:i.email?c.email:"",error:i.email&&Boolean(c.email),value:r.email,onChange:a,placeholder:"Your email"}),Object(M.jsx)(k.a,{className:"".concat(!(i.username&&Boolean(c.username))&&n.errorOffset),id:"username",label:Object(M.jsx)(b.a,{className:n.label,children:"Name"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs,underline:n.underline}},name:"username",autoComplete:"username",helperText:i.username?c.username:"",error:i.username&&Boolean(c.username),value:r.username,onChange:a,placeholder:"Your name"}),Object(M.jsx)(k.a,{className:"".concat(!(i.password&&Boolean(c.password))&&n.errorOffset),id:"password",label:Object(M.jsx)(b.a,{className:n.label,children:"Password"}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{classes:{input:n.inputs,underline:n.underline}},type:"password",autoComplete:"current-password",helperText:i.password?c.password:"",error:i.password&&Boolean(c.password),value:r.password,onChange:a,placeholder:"Create a password"}),Object(M.jsxs)(j.a,{textAlign:"center",children:[Object(M.jsx)(X,{classes:"".concat(n.submit," ").concat(n.demoLoginBtn)}),Object(M.jsx)(N.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:o?Object(M.jsx)(I.a,{style:{color:"white"}}):"Sign Up"})]})]})}})};function Fe(){var e=Pe(),t=z().updateLoginContext,n=Y().updateSnackBarMessage;return Object(M.jsxs)(m.a,{container:!0,component:"main",className:e.root,children:[Object(M.jsx)(p.a,{}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:12,md:12,elevation:6,component:h.a,square:!0,children:Object(M.jsxs)(j.a,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",children:[Object(M.jsx)(Re,{asideText:"Become a sitter",linkTo:"/signup"}),Object(M.jsx)(j.a,{className:e.signupOuterContainer,width:"100%",maxWidth:600,p:3,alignSelf:"center",children:Object(M.jsxs)(m.a,{className:e.signupContainer,container:!0,elevation:6,component:h.a,children:[Object(M.jsx)(m.a,{item:!0,xs:!0,children:Object(M.jsx)(b.a,{className:e.welcome,component:"h1",variant:"h5",children:"Sign Up"})}),Object(M.jsx)(Ae,{handleSubmit:function(e,a){var r=e.username,i=e.email,c=e.password,o=a.setSubmitting;De(r,i,c).then((function(e){e.error?(console.error({error:e.error.message}),o(!1),n(e.error.message)):e.success?t(e.success):(console.error({data:e}),o(!1),n("An unexpected error occurred. Please try again"))}))}}),Object(M.jsxs)(j.a,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"170px",margin:"20px auto",children:[Object(M.jsx)(b.a,{className:e.alreadyMember,component:"p",variant:"body1",children:"Already a member?"}),Object(M.jsx)(b.a,{component:u.b,to:"/login",className:e.loginText,variant:"body1",children:"Login"})]})]})}),Object(M.jsx)(j.a,{p:1,alignSelf:"center"})]})})]})}var Ee=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/conversations",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("/conversations/".concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"},e.next=3,fetch("/messages/",n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=n(307),Le=Object(a.createContext)({conversations:void 0,activeConvo:void 0,mobileOpen:!1,updateConvoContext:function(){return null},activateChat:function(){return null},toggleDrawer:function(){return Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})))},sendMessageContenxt:function(){return null}}),qe=function(e){var t=e.children,n=Object(a.useState)(),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(),s=Object(R.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(!1),p=Object(R.a)(d,2),h=p[0],j=p[1],m=Object(a.useCallback)((function(e){c(e)}),[]),b=Object(a.useCallback)(Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)}))),[m]),x=Object(a.useCallback)((function(e){u(e)}),[]),g=Object(a.useCallback)((function(e,t){return function(){var n=Object(y.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a||"keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key){n.next=2;break}return n.abrupt("return");case 2:if(j(e),!e){n.next=10;break}return n.next=6,Ue(t);case 6:r=n.sent,x(r),n.next=11;break;case 10:x(null);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}),[x]),f=Object(a.useCallback)(function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t);case 2:n=e.sent,u(Object(ze.a)((function(e){e.messages.push(n)}))),b();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]);return Object(a.useEffect)((function(){try{b()}catch(e){}}),[b]),Object(M.jsx)(Le.Provider,{value:{conversations:i,activeConvo:l,mobileOpen:h,updateConvoContext:m,activateChat:x,toggleDrawer:g,sendMessageContenxt:f},children:t})};function Ve(){return Object(a.useContext)(Le)}var Ge=n(28),Je=function(e){return z().loggedInUser?Object(M.jsx)(d.b,Object(Ge.a)({},e)):Object(M.jsx)(d.a,{to:"/login"})},Ke=n(660),Ye=n(651),Ze=n(625),Qe=Object(g.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)",width:"99%",margin:"0 auto"}},layout:{backgroundColor:"#FFFFFF"},layoutOuterContainer:Object(x.a)({},e.breakpoints.down("sm"),{padding:e.spacing(0)}),layoutContainer:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}}));function Xe(e){var t=e.children,n=Qe(),r=z().loggedInUser,i=E().initSocket;return Object(a.useEffect)((function(){i()}),[i]),r?Object(M.jsxs)(Ye.a,{container:!0,component:"main",className:"".concat(n.root," ").concat(n.layout),children:[Object(M.jsx)(Ze.a,{}),Object(M.jsx)(Ye.a,{item:!0,xs:12,sm:12,md:12,children:Object(M.jsxs)(he.a,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",children:[Object(M.jsx)(Re,{loggedInUser:r,asideText:"Become a sitter",linkTo:"/profile/edit"}),Object(M.jsx)(he.a,{className:n.layoutOuterContainer,width:"100%",height:"calc(100vh - 90px)",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(Ye.a,{className:n.layoutContainer,container:!0,children:t})})]})})]}):Object(M.jsx)(Ke.a,{})}var _e=function(){return Object(M.jsx)(Xe,{children:Object(M.jsx)(m.a,{children:Object(M.jsx)(j.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"Temporary Dashboard Main Content"})})})})},$e=n(525),et=n(26),tt=n(638),nt=n(61),at=n(192),rt=n.n(at),it=n(661);function ct(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",credentials:"include"},e.next=3,fetch("/profile/".concat(t),n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"},e.next=3,fetch("/profile",n).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return dt.apply(this,arguments)}function dt(){return(dt=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",credentials:"include"},e.next=3,fetch("/profile/my-profile",t).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(y.a)(v.a.mark((function e(t){var n,a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.city,a=t.searchStartDate,r=t.searchEndDate,i={method:"GET",credentials:"include"},e.next=4,fetch("/profile/?city=".concat(n,"&searchStartDate=").concat(a,"&searchEndDate=").concat(r),i).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"},e.next=3,fetch("/profile/".concat(t),a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt=Object(g.a)((function(e){return{search:Object(x.a)({position:"relative",borderRadius:e.shape.borderRadius,marginLeft:0,lineHeight:"18px",border:"1px solid #ccc"},e.breakpoints.down("xs"),{width:"80vw !important"}),searchRoot:{width:"100%",height:"100%"},searchInput:{paddingLeft:"48px !important"},searchIcon:{position:"absolute",pointerEvents:"none",marginLeft:"1rem"}}})),xt=function(e){var t=e.dateRange,n=e.setProfiles,r=e.search,i=e.handleChange,c=bt(),o=Object(a.useState)(!1),s=Object(R.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)([]),p=Object(R.a)(d,2),h=p[0],j=p[1],m=Object(a.useState)(!1),b=Object(R.a)(m,2),x=b[0],g=b[1],f=Object(it.a)(r,500),O=Object(R.a)(f,1)[0],w=Y().updateSnackBarMessage;return Object(a.useEffect)((function(){var e=!0;try{(function(){var a=Object(y.a)(v.a.mark((function a(){var r,i,c,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.next=3,pt({city:O,searchStartDate:null===(r=t[0])||void 0===r?void 0:r.toISOString().split("T")[0],searchEndDate:null===(i=t[1])||void 0===i?void 0:i.toISOString().split("T")[0]});case 3:c=a.sent,n(c),o=[],e&&c&&c.length&&(c.map((function(e){return o.push(e.address)})),s=Object(et.a)(new Set(o)),j(s)),g(!1);case 8:case"end":return a.stop()}var s}),a)})));return function(){return a.apply(this,arguments)}})()()}catch(a){a instanceof Error&&w(a.message)}return function(){e=!1}}),[t,O,n,w]),Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(M.jsx)(tt.a,{id:"asynchronous-search-location",open:l,onOpen:function(){u(!0)},onClose:function(){u(!1)},getOptionLabel:function(e){return e},options:h,loading:x,onInputChange:i,inputValue:r,noOptionsText:"No Sitters Found",freeSolo:!0,renderInput:function(e){return Object(M.jsx)(he.a,{width:"300px",height:"56px",className:c.search,children:Object(M.jsx)(nt.c,{ref:e.InputProps.ref,inputProps:e.inputProps,placeholder:"Search",classes:{root:c.searchRoot,input:c.searchInput},startAdornment:Object(M.jsx)(rt.a,{className:c.searchIcon})})})}})})},gt=n(636),ft=n(634),Ot=n(626),vt=n(640),yt=n(115),wt=n.n(yt),Nt=Object(g.a)((function(e){return{dateRangeBox:{position:"relative"},dateRangeIcon:{color:"#000",marginRight:e.spacing(1)},fakePlaceholder:{position:"absolute",top:"18px",left:"48px",font:"inherit",color:"#aaa"},formattedDateRangeText:{position:"absolute",top:"18px",left:"48px"},startDateField:Object(x.a)({color:"transparent !important",backgroundColor:"transparent"},e.breakpoints.down("xs"),{width:"80vw"}),endDateField:{display:"none !important"}}})),kt=function(e){var t=e.search,n=e.setProfiles,r=e.dateRange,i=e.handleChange,c=Nt(),o=Y().updateSnackBarMessage,s=function(e){var t,n,a,r,i,c=null===(t=e[0])||void 0===t?void 0:t.getFullYear(),o=null===(n=e[0])||void 0===n?void 0:n.getDate(),s=null===(a=e[0])||void 0===a?void 0:a.toLocaleDateString("en-US",{month:"short"}),l=null===(r=e[1])||void 0===r?void 0:r.getDate(),u=null===(i=e[1])||void 0===i?void 0:i.toLocaleDateString("en-US",{month:"short"});return"".concat(o," ").concat(s," - ").concat(l," ").concat(u," ").concat(c)};return Object(a.useEffect)((function(){try{(function(){var e=Object(y.a)(v.a.mark((function e(){var a,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt({city:t,searchStartDate:null===(a=r[0])||void 0===a?void 0:a.toISOString().split("T")[0],searchEndDate:null===(i=r[1])||void 0===i?void 0:i.toISOString().split("T")[0]});case 2:c=e.sent,n(c);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){e instanceof Error&&o(e.message)}}),[t,r,n,o]),Object(M.jsx)(Ot.b,{dateAdapter:ft.a,children:Object(M.jsx)(vt.a,{inputFormat:"dd MMM yyyy",disableMaskedInput:!0,startText:null,endText:null,value:r,onChange:i,renderInput:function(e,t){return Object(M.jsxs)(he.a,{className:c.dateRangeBox,children:[!e.focused&&!r[0]&&Object(M.jsx)($e.a,{className:c.fakePlaceholder,children:"Choose Dates"}),Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{InputProps:{startAdornment:Object(M.jsx)(wt.a,{className:c.dateRangeIcon}),className:c.startDateField}})),null!==r[0]&&null!==r[1]&&Object(M.jsx)($e.a,{className:c.formattedDateRangeText,children:s(r)}),Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},t),{},{className:c.endDateField}))]})}})})},Ct=n(665),St=n(666),It=n(652),Bt=n(645),Tt=n(199),Rt=n.n(Tt),Wt=Object(g.a)((function(e){return{root:{"& .MuiCardContent-root:last-child":{paddingBottom:e.spacing(1.5)}},sitterOuterBox:Object(x.a)({margin:e.spacing(3,"auto")},e.breakpoints.down("xs"),{width:"70% !important"}),avatar:{width:"100px !important",height:"100px !important",border:"5px solid #ffffff","&:hover":{opacity:"0.8"}},sitterName:{padding:e.spacing(1)},sitterShortDesc:{color:"#aaa"},sitterAboutMe:{padding:e.spacing(0,2)},profileDetailBottom:{padding:e.spacing(2,4)},aboutMeDesc:{marginBottom:e.spacing(3)},rating:{margin:e.spacing(1,"auto")},locationIcon:{color:e.palette.primary.main},locationWage:{borderTop:"1px solid #ccc",padding:e.spacing(1,0,0),margin:e.spacing(2,0,0)},locationText:{color:"#aaa"},wage:{fontWeight:700}}})),Pt=function(e){var t=e.sitter,n=Wt();return Object(M.jsx)(Ye.a,{item:!0,xs:12,sm:5,md:4,className:n.root,children:Object(M.jsx)(he.a,{width:"80%",display:"flex",justifyContent:"center",alignItems:"center",className:n.sitterOuterBox,children:Object(M.jsx)(Ct.a,{raised:!0,children:Object(M.jsxs)(St.a,{component:he.a,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(M.jsx)(It.a,{variant:"circular",className:n.avatar,src:t.photos[1],alt:"".concat(t.firstName,"-").concat(t.lastName,"-profile-image"),component:u.b,to:"/listings/".concat(t._id)}),Object(M.jsx)($e.a,{component:"h5",variant:"h5",className:n.sitterName,align:"center",children:"".concat(t.firstName," ").concat(t.lastName)}),Object(M.jsx)($e.a,{variant:"body2",className:n.sitterShortDesc,children:t.title}),Object(M.jsx)(Bt.a,{name:"read-only",size:"small",value:4,readOnly:!0,className:n.rating}),Object(M.jsx)($e.a,{variant:"body1",align:"center",className:n.sitterAboutMe,children:t.description.slice(0,60)}),Object(M.jsxs)(he.a,{width:"95%",display:"flex",justifyContent:"space-between",alignItems:"center",className:n.locationWage,children:[Object(M.jsxs)(he.a,{display:"flex",alignItems:"center",children:[Object(M.jsx)(Rt.a,{className:n.locationIcon}),Object(M.jsx)($e.a,{variant:"body2",sx:{ml:.5},className:n.locationText,children:t.address})]}),Object(M.jsxs)($e.a,{component:"h6",variant:"h6",align:"center",className:n.wage,children:["$",t.hourlyWage,"/hr"]})]})]})})})})},Dt=Object(g.a)((function(e){return{listings:{backgroundColor:"#ffffff"},searchTitleBox:{margin:e.spacing(2,0)},searchTitleText:{fontWeight:700},searchBox:Object(x.a)({margin:e.spacing(2,0)},e.breakpoints.down("xs"),{flexDirection:"column"}),dateRangeIcon:{color:"#aaa",marginRight:e.spacing(1)},sitterLists:{maxWidth:"1280px"},showMoreBox:{paddingBottom:e.spacing(4),margin:e.spacing(1,"auto",4)},showMoreBtn:{width:"150px",color:"#0a0a0a !important",borderColor:"#aaa !important",textTransform:"uppercase",padding:e.spacing(1)}}})),Mt=function(){var e=Object(a.useState)([]),t=Object(R.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)([null,null]),c=Object(R.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)(""),u=Object(R.a)(l,2),d=u[0],p=u[1],h=Object(a.useState)(!1),j=Object(R.a)(h,2),m=j[0],b=j[1],x=Y().updateSnackBarMessage,g=Dt();Object(a.useEffect)((function(){try{(function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,pt({city:d,searchStartDate:null===(t=o[0])||void 0===t?void 0:t.toISOString().split("T")[0],searchEndDate:null===(n=o[1])||void 0===n?void 0:n.toISOString().split("T")[0]});case 3:(a=e.sent).error&&x(a.error),r(a),b(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){e instanceof Error&&x(e.message),b(!1)}}),[o,d,x]);return Object(M.jsx)(Xe,{children:Object(M.jsxs)(Ye.a,{height:"100%",className:g.listings,children:[Object(M.jsx)(he.a,{height:"50px",display:"flex",justifyContent:"center",alignItems:"center",className:g.searchTitleBox,children:Object(M.jsx)($e.a,{component:"h4",variant:"h4",align:"center",className:g.searchTitleText,children:"Your search results"})}),Object(M.jsxs)(he.a,{display:"flex",justifyContent:"center",alignItems:"center",className:g.searchBox,children:[Object(M.jsx)(xt,{dateRange:o,setProfiles:r,search:d,handleChange:function(e,t){p(t)}}),Object(M.jsx)(kt,{search:d,setProfiles:r,dateRange:o,handleChange:function(e){s(e)}})]}),m&&Object(M.jsx)(he.a,{height:"60%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(Ke.a,{size:100})}),!m&&n.length&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ye.a,{width:"100vw",minHeight:"calc(100vh - 196px)",container:!0,className:g.sitterLists,justifyContent:"space-evenly",children:n.map((function(e){return Object(M.jsx)(Pt,{sitter:e},e._id)}))}),Object(M.jsx)(he.a,{display:"flex",justifyContent:"center",alignItems:"center",className:g.showMoreBox,children:Object(M.jsx)(de.a,{variant:"outlined",onClick:function(){},className:g.showMoreBtn,children:"Show More"})})]})]})})},At=n(642),Ft=n(610),Et=n(509),Ut=n(309),Ht=n.n(Ut),zt=Object(g.a)((function(e){return{profileSideBar:{"& .MuiDrawer-paperAnchorLeft":{display:"flex",justifyContent:"center",alignItems:"center",width:"150px"}},profileMenuBtn:{position:"absolute",top:"100px",right:"10px"},menuList:{width:"120px",height:"280px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",fontSize:"13px",color:"#5c5c5c"},sideBarDesktop:Object(x.a)({display:"flex",justifyContent:"center",alignItems:"flex-start",marginTop:e.spacing(10)},e.breakpoints.down("xs"),{display:"none"}),sideBarMobile:Object(x.a)({},e.breakpoints.up("sm"),{display:"none"}),activeMenu:{fontWeight:700,color:"#000000"}}})),Lt=[{menuItem:"Edit Profile",linkTo:"/profile/edit"},{menuItem:"Profile Photo",linkTo:"/profile/photo"},{menuItem:"Availability",linkTo:"/profile/availability"},{menuItem:"Payment",linkTo:"/profile/payment"},{menuItem:"Security",linkTo:"/profile/security"},{menuItem:"Settings",linkTo:"/profile/settings"}],qt=function(){var e=zt(),t=Object(a.useState)(!1),n=Object(R.a)(t,2),r=n[0],i=n[1],c=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&i(e)}},o=Object(M.jsx)(j.a,{role:"presentation",onClick:c(!1),onKeyDown:c(!1),children:Object(M.jsx)(Ft.a,{className:e.menuList,children:Lt.map((function(t,n){return Object(M.jsx)(Et.a,{button:!0,component:u.c,to:t.linkTo,activeClassName:e.activeMenu,children:t.menuItem},n)}))})});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{item:!0,sm:3,className:e.sideBarDesktop,children:o}),Object(M.jsxs)(j.a,{className:e.sideBarMobile,children:[Object(M.jsxs)(N.a,{className:e.profileMenuBtn,onClick:c(!0),children:[Object(M.jsx)(Ht.a,{}),"Profile Menus"]}),Object(M.jsx)(At.a,{className:e.profileSideBar,open:r,onClose:c(!1),onOpen:c(!0),children:o})]})]})},Vt=Object(g.a)((function(){return{tempProfileMain:{backgroundColor:"#fff"}}})),Gt=function(){var e=Vt();return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",className:e.tempProfileMain,children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"TempProfileMain Page Template"})})})},Jt=n(607),Kt=n(644),Yt=n(656),Zt=Object(g.a)((function(e){return{editProfileContainer:Object(x.a)({margin:"auto"},e.breakpoints.down("xs"),{width:"100%",margin:e.spacing(0)}),form:Object(x.a)({width:"100%",padding:"0 40px"},e.breakpoints.down("xs"),{padding:e.spacing(0),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),typography:{margin:20,fontWeight:700},title:Object(x.a)({fontWeight:700,textAlign:"center",padding:"5px"},e.breakpoints.down("xs"),{padding:e.spacing(2)}),label:{padding:10,margin:10,fontWeight:700,width:150,display:"inline-block",textAlign:"right",textTransform:"uppercase"},textField:{width:"60%"},box:Object(x.a)({padding:2.5},e.breakpoints.down("xs"),{width:"95%"}),boxStyle:{display:"inline-flex",width:"60%",justifyContent:"space-between"},main:{padding:"40px",minHeight:"100vh",background:"primary",margin:"auto"},button:{width:120,height:40,margin:"20px auto",alignSelf:"center",display:"block",textTransform:"uppercase"},grid:{margin:"auto"},select:{width:"150%"},phone:{display:"inline-block",fontStyle:"italic"}}})),Qt=S.c({firstName:S.d().required("First Name is required"),lastName:S.d().required("Last Name is required"),gender:S.d().required("Gender is required"),birth:S.d().required("Birth is required"),phone:S.d().matches(/[0-9]{10}/gm,'Phone number is not valid (e.g., 1231231234 without "-")').required("Phone number is required"),address:S.d().trim().matches(/^[a-z]+[,]\s*[a-z]+\s*[a-z]*$/gim,"Address is not valid (e.g., City, Province (Comma is required))").required("Address is required"),description:S.d().required("Your description is required")}),Xt=function(){var e=z().loggedInUser,t=Object(d.g)(),n=Zt(),r=Y().updateSnackBarMessage,i=Object(a.useState)(""),c=Object(R.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)({userId:null===e||void 0===e?void 0:e.id,firstName:"",lastName:"",gender:"Male",birth:"",phone:"",address:"",description:"",isSitter:!1,title:"",hourlyWage:0}),u=Object(R.a)(l,2),p=u[0],x=u[1],g=Object(a.useState)(!1),f=Object(R.a)(g,2),O=f[0],w=f[1];Object(a.useEffect)((function(){try{(function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut();case 2:(t=e.sent)._id&&(x(t),s(t._id),w(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){e instanceof Error&&r(e.message)}}),[r]);var S=function(){var e=Object(y.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=12;break}return e.prev=1,e.next=4,jt(o,n);case 4:r("Updated Profile Successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),e.t0 instanceof Error&&r(e.t0.message);case 10:e.next=21;break;case 12:return e.prev=12,e.next=15,st(n);case 15:r("Created Profile Successfully"),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(12),e.t1 instanceof Error&&r(e.t1.message);case 21:t.push("/profile");case 22:case"end":return e.stop()}}),e,null,[[1,7],[12,18]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(C.c)({initialValues:p,onSubmit:S,validationSchema:Qt,enableReinitialize:!0});return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsxs)(j.a,{width:"80%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",className:n.editProfileContainer,children:[Object(M.jsx)(b.a,{variant:"h4",className:n.title,children:"Edit Profile"}),Object(M.jsx)(b.a,{variant:"body1",color:"primary",children:"Want to become a sitter? Create your Profile first"}),Object(M.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:I.handleSubmit,children:[Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"first-name",className:n.label,children:"first name"}),Object(M.jsx)(k.a,{type:"text",id:"first-name",placeholder:"John",variant:"outlined",name:"firstName",className:n.textField,value:I.values.firstName,onChange:I.handleChange,error:I.touched.firstName&&Boolean(I.errors.firstName),helperText:I.touched.firstName&&I.errors.firstName,onBlur:I.handleBlur})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"last-name",className:n.label,children:"last name"}),Object(M.jsx)(k.a,{type:"text",id:"last-name",placeholder:"Doe",variant:"outlined",className:n.textField,name:"lastName",value:I.values.lastName,onChange:I.handleChange,error:I.touched.lastName&&Boolean(I.errors.lastName),helperText:I.touched.lastName&&I.errors.lastName,onBlur:I.handleBlur})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"select-outlined",className:n.label,children:"gender"}),Object(M.jsx)(Jt.a,{variant:"outlined",children:Object(M.jsxs)(Kt.a,{labelId:"select-outlined-label",id:"gender",name:"gender",value:I.values.gender,onChange:I.handleChange,className:n.select,children:[Object(M.jsx)(T.a,{value:"Male",children:"Male"}),Object(M.jsx)(T.a,{value:"Female",children:"Female"}),Object(M.jsx)(T.a,{value:"Other",children:"Other"})]})})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"birth",className:n.label,children:"birth date"}),Object(M.jsx)(k.a,{type:"date",id:"birth",variant:"outlined",className:n.textField,name:"birth",value:I.values.birth,onChange:I.handleChange})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"email",className:n.label,children:"email address"}),Object(M.jsx)(b.a,{className:n.textField,children:null===e||void 0===e?void 0:e.email})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{className:n.label,children:"phone"}),Object(M.jsx)(k.a,{type:"text",id:"phone",name:"phone",placeholder:"Enter phone number without '-'",variant:"outlined",className:n.textField,value:I.values.phone,onChange:I.handleChange,error:I.touched.phone&&Boolean(I.errors.phone),helperText:I.touched.phone&&I.errors.phone,onBlur:I.handleBlur})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"where-live",className:n.label,children:"city and state"}),Object(M.jsx)(k.a,{type:"text",id:"where-live",placeholder:"City, Province (Comma is required)",variant:"outlined",className:n.textField,name:"address",value:I.values.address,onChange:I.handleChange,error:I.touched.address&&Boolean(I.errors.address),helperText:I.touched.address&&I.errors.address,onBlur:I.handleBlur})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"describe",className:n.label,children:"describe your self"}),Object(M.jsx)(k.a,{id:"describe",placeholder:"About you",variant:"outlined",className:n.textField,multiline:!0,rows:3,name:"description",value:I.values.description,onChange:I.handleChange,error:I.touched.description&&Boolean(I.errors.description),helperText:I.touched.description&&I.errors.description,onBlur:I.handleBlur})]}),O&&Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"isSitter",className:n.label,children:"Become a Sitter"}),Object(M.jsx)(Yt.a,{id:"isSitter",name:"isSitter",value:I.values.isSitter,checked:I.values.isSitter,onChange:I.handleChange,inputProps:{"aria-label":"controlled"}})]}),O&&I.values.isSitter&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"title",className:n.label,children:"Title"}),Object(M.jsx)(k.a,{type:"text",id:"title",placeholder:"Title",variant:"outlined",className:n.textField,name:"title",value:I.values.title,onChange:I.handleChange,error:I.touched.title&&Boolean(I.errors.title),helperText:I.touched.title&&I.errors.title,onBlur:I.handleBlur})]}),Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",className:n.box,children:[Object(M.jsx)("label",{htmlFor:"where-live",className:n.label,children:"Hourly Wage"}),Object(M.jsx)(k.a,{type:"number",id:"hourlyWage",variant:"outlined",className:n.textField,name:"hourlyWage",value:I.values.hourlyWage,onChange:I.handleChange,error:I.touched.hourlyWage&&Boolean(I.errors.hourlyWage),helperText:I.touched.hourlyWage&&I.errors.hourlyWage,onBlur:I.handleBlur})]})]}),Object(M.jsx)(N.a,{variant:"contained",color:"secondary",size:"large",className:n.button,type:"submit",children:"save"})]})]})})},_t=function(){return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"Profile Photo Page Template"})})})},$t=Object(g.a)((function(e){return{itemWrap:{width:"100%"},listWrap:{width:"70%",margin:"auto"},dates:{width:"40%"},m5:{marginRight:"20px"},bookingForm:{padding:e.spacing(2)},label:{fontWeight:700,textTransform:"uppercase"},submit:{textTransform:"uppercase",backgroundColor:"#f04040 !important",margin:e.spacing(2,"auto",3),width:"180px",height:"50px",marginTop:"60px  !important"},hourInput:Object(x.a)({width:"160px"},e.breakpoints.between(426,1440),{width:"100%",margin:e.spacing(1,0)}),errorHelperText:{color:"red !important",margin:"0 0 8px !important"},dayLabel:{color:"black",textTransform:"capitalize",fontWeight:900},headerTitle:{margin:"50px 0px",fontWeight:900},wageInput:{width:"160px"},wageLabel:{marginRight:"11px",textTransform:"uppercase"}}})),en=n(639),tn=Object(g.a)((function(e){return{hourInput:Object(x.a)({width:"160px"},e.breakpoints.between(426,1440),{width:"100%",margin:e.spacing(1,0)}),formWrap:{width:"60%"},m5:{marginRight:"20px"},timeLabel:{fontWeight:900,textTransform:"uppercase"}}})),nn=function(e){var t=e.values,n=e.touched,a=e.errors,r=e.dateRange,i=e.day,c=e.updateTime,o=tn();return Object(M.jsxs)(he.a,{className:o.formWrap,flexDirection:"row",display:"flex",alignItems:"center",children:[Object(M.jsx)(b.a,{variant:"button",className:"".concat(o.m5," ").concat(o.timeLabel),children:"From"}),Object(M.jsx)(he.a,{className:o.m5,children:Object(M.jsx)(en.a,{inputFormat:"hh aaa",value:r[i][0],views:["hours"],onChange:function(e){t.dateRange[i][0]=e,c(e,i,0)},renderInput:function(e){return Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{className:o.hourInput,placeholder:"Choose Time",error:n.dateRange&&Boolean(a.dateRange)}))}})}),Object(M.jsx)(b.a,{variant:"button",className:"".concat(o.m5," ").concat(o.timeLabel),children:"To"}),Object(M.jsx)(he.a,{children:Object(M.jsx)(en.a,{inputFormat:"hh aaa",value:r[i][1],views:["hours"],onChange:function(e){t.dateRange[i][1]=e,c(e,i,1)},renderInput:function(e){return Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{className:o.hourInput,placeholder:"Choose Time",error:n.dateRange&&Boolean(a.dateRange)}))}})})]})},an=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("/profile/".concat(n),a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rn=n(627),cn=n(611),on=n(653);we("Pet Sitting","Mary Smith","Mary has requested your service for 2 days");var sn={dateRange:{sunday:[null,null],monday:[null,null],tuesday:[null,null],wednesday:[null,null],thursday:[null,null],friday:[null,null],saturday:[null,null],hourlyWage:""}},ln=S.a().of(S.b().typeError("Wrong Date Type").required("Required")),un=S.c().shape({sunday:ln,monday:ln,tuesday:ln,wednesday:ln,thursday:ln,friday:ln,saturday:ln,hourlyWage:S.d()}),dn=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],pn=function(){var e=Object(a.useState)(sn.dateRange),t=Object(R.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(R.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)(""),u=Object(R.a)(l,2),d=u[0],p=u[1],x=Object(a.useState)(""),g=Object(R.a)(x,2),f=g[0],O=g[1],w=z().loggedInUser,N=$t(),k=function(e,t,a){var i=Object(Ge.a)({},n);i[t][a]=e,r(i)};return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",children:Object(M.jsxs)(j.a,{width:"100%",children:[Object(M.jsx)(b.a,{className:N.headerTitle,component:"h5",variant:"h5",align:"center",children:"Your Availability"}),Object(M.jsx)(Ft.a,{className:N.listWrap,children:Object(M.jsx)(C.b,{initialValues:sn,validationSchema:un,onSubmit:function(e,t){var n=e.dateRange,a=t.setSubmitting,i=t.resetForm;un.isValid(n).then(function(){var e=Object(y.a)(v.a.mark((function e(t){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return e.prev=1,delete(c=Object(Ge.a)({},n)).hourlyWage,e.next=6,an({availability:c,hourlyWage:f},null===w||void 0===w?void 0:w.profileId);case 6:a(!1),r(sn.dateRange),i({values:{dateRange:sn.dateRange}}),s(!1),p(""),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),p("Failed to save data. Please try"),s(!0),a(!1);case 18:e.next=23;break;case 20:p("Please fill all Times"),s(!0),a(!1);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}())},validate:function(e){var t={};return un.isValid(e.dateRange).then((function(e){e?O(n.hourlyWage):t.dateRange="Please fill all Times."})),t},children:function(e){var t,a,i=e.handleSubmit,c=e.values,s=e.touched,l=e.errors,u=e.isSubmitting;return Object(M.jsx)(Ot.b,{dateAdapter:ft.a,children:Object(M.jsx)(C.a,{onSubmit:i,children:Object(M.jsxs)(j.a,{className:N.bookingForm,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(M.jsx)(Jt.a,{variant:"outlined",children:Object(M.jsxs)(j.a,{display:"flex",alignItems:"center",children:[Object(M.jsx)(b.a,{variant:"button",className:"".concat(N.wageLabel," ").concat(N.dayLabel),children:"Hourly Rate"}),Object(M.jsx)(on.a,{className:N.wageInput,id:"outlined-adornment-amount",value:n.hourlyWage,onChange:function(e){var t=Object(Ge.a)({},n);t.hourlyWage=e.target.value,r(t)},startAdornment:Object(M.jsx)(rn.a,{position:"start",children:"$"}),type:"number"})]})}),dn.map((function(e,t){return Object(M.jsx)(Et.a,{children:Object(M.jsxs)(j.a,{className:N.itemWrap,display:"flex",flexDirection:"row",alignItems:"center",children:[Object(M.jsx)(j.a,{className:N.dates,display:"flex",flexDirection:"row",children:Object(M.jsx)(b.a,{className:"".concat(N.m5," ").concat(N.dayLabel),children:e})}),Object(M.jsx)(nn,{values:c,touched:s,errors:l,dateRange:n,day:e,updateTime:k})]})},t)})),Object(M.jsx)(cn.a,{className:N.errorHelperText,children:s.dateRange&&(l.dateRange||(null===(t=l.dateRange)||void 0===t?void 0:t[0])||(null===(a=l.dateRange)||void 0===a?void 0:a[1]))||null}),o&&Object(M.jsx)(b.a,{className:N.errorHelperText,children:d}),Object(M.jsx)(de.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:N.submit,children:u?Object(M.jsx)(Ke.a,{style:{color:"white"}}):"Save"})]})})})}})})]})})})},hn=function(){return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"Payment Page Template"})})})},jn=function(){return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"Security Page Template"})})})},mn=function(){return Object(M.jsx)(m.a,{item:!0,xs:12,sm:9,elevation:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(b.a,{component:"h5",variant:"h5",align:"center",children:"Settings Page Template"})})})},bn=Object(g.a)((function(e){var t;return{profile:(t={height:"calc(100vh - 90px)",padding:e.spacing(3)},Object(x.a)(t,e.breakpoints.down(768),{padding:e.spacing(0)}),Object(x.a)(t,"display","flex"),Object(x.a)(t,"flexDirection","row"),t),contentWrap:{width:"78%",height:"100%",padding:"10px"}}})),xn=function(){var e=bn(),t=Object(d.h)();return Object(M.jsx)(Xe,{children:Object(M.jsxs)(Ye.a,{container:!0,className:e.profile,children:[Object(M.jsx)(qt,{}),function(){switch(t.pathname){case"/profile":return Object(M.jsx)(Gt,{});case"/profile/edit":return Object(M.jsx)(Xt,{});case"/profile/photo":return Object(M.jsx)(_t,{});case"/profile/payment":return Object(M.jsx)(hn,{});case"/profile/availability":return Object(M.jsx)(pn,{});case"/profile/security":return Object(M.jsx)(jn,{});case"/profile/settings":return Object(M.jsx)(mn,{})}}()]})})},gn=n(659),fn=n(667),On=n(668),vn=Object(g.a)((function(e){var t;return{root:Object(x.a)({},e.breakpoints.down("xs"),{"& .MuiPaper-rounded":{borderRadius:0}}),profileDetailBox:Object(x.a)({},e.breakpoints.up("sm"),{padding:e.spacing(3)}),profileDetailTop:{position:"relative"},profileBackgroundImg:{borderRadius:"5px"},avatar:{width:"150px !important",height:"150px !important",border:"5px solid #ffffff",margin:e.spacing(-11.5,"auto",0)},sitterName:{padding:e.spacing(1,0)},sitterShortDesc:{color:"#aaa"},sitterLocation:{margin:"0 auto",padding:e.spacing(2,0)},locationIcon:{color:"#f04040",marginRight:e.spacing(.5)},sitterLocationText:{color:"#aaa"},profileDetailBottom:{padding:e.spacing(2,4)},aboutMeTitle:{paddingBottom:e.spacing(2)},aboutMeDesc:{marginBottom:e.spacing(3)},imageList:(t={},Object(x.a)(t,e.breakpoints.down("sm"),{height:"365px"}),Object(x.a)(t,e.breakpoints.between("sm","md"),{height:"340px"}),Object(x.a)(t,e.breakpoints.up("md"),{height:"145px",gridTemplateColumns:"repeat(4, 1fr) !important"}),t),imageItem:{padding:e.spacing(1),borderRadius:"15px"}}})),yn=function(e){var t=e.sitter,n=vn();return Object(M.jsx)(Ye.a,{item:!0,xs:12,sm:7,md:7,lg:6,xl:5,className:n.root,children:Object(M.jsx)(he.a,{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",className:n.profileDetailBox,children:Object(M.jsxs)(gn.a,{elevation:6,children:[Object(M.jsxs)(he.a,{className:n.profileDetailTop,children:[Object(M.jsx)("img",{className:n.profileBackgroundImg,width:"100%",height:"200px",src:t.photos[0],alt:"profile-detail-bg-image"}),Object(M.jsx)(It.a,{variant:"circular",className:n.avatar,src:t.photos[1],alt:"".concat(t.firstName,"-").concat(t.lastName,"-profile-image")}),Object(M.jsx)($e.a,{component:"h5",variant:"h5",align:"center",className:n.sitterName,children:"".concat(t.firstName," ").concat(t.lastName)}),Object(M.jsx)($e.a,{component:"p",variant:"body1",align:"center",className:n.sitterShortDesc,children:t.title}),Object(M.jsxs)(he.a,{width:"250px",display:"flex",justifyContent:"center",alignItems:"center",className:n.sitterLocation,children:[Object(M.jsx)(Rt.a,{className:n.locationIcon}),Object(M.jsx)($e.a,{component:"p",variant:"body1",align:"center",className:n.sitterLocationText,children:t.address})]})]}),Object(M.jsxs)(he.a,{className:n.profileDetailBottom,children:[Object(M.jsx)($e.a,{component:"h6",variant:"h6",className:n.aboutMeTitle,children:"About me"}),Object(M.jsx)($e.a,{component:"p",variant:"body1",className:n.aboutMeDesc,children:t.description}),Object(M.jsx)(fn.a,{className:n.imageList,rowHeight:125,children:t.photos.slice(2).map((function(e){return Object(M.jsx)(On.a,{children:Object(M.jsx)("img",{className:n.imageItem,src:"".concat(e,"?w=125&h=125&fit=crop&auto=format"),alt:"pet-image-".concat(e),loading:"lazy"})},e)}))})]})]})})})},wn=n(664),Nn=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a,r){var i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sitterProfileId:n,profileId:t,startDate:a,endDate:r}),credentials:"include"},e.prev=1,e.next=4,fetch("/request",i);case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),kn=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"},n=(new Date).getTime(),e.prev=2,e.next=5,fetch("/request/".concat(n),t);case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,i=r.success,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Cn=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,requestId:n}),credentials:"include"},e.prev=1,e.next=4,fetch("/request",a);case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:{message:"Unable to connect to server. Please try again"}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Sn=Object(g.a)((function(e){return{bookingBox:Object(x.a)({},e.breakpoints.up("sm"),{padding:e.spacing(3,3,3,0)}),bookingContainer:Object(x.a)({},e.breakpoints.down("xs"),{width:"100vw"}),bookingForm:{padding:e.spacing(2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},hourlyWage:{fontWeight:700,padding:e.spacing(2)},rating:{padding:e.spacing(0,0,1)},label:{fontWeight:700,textTransform:"uppercase"},inputField:Object(x.a)({padding:e.spacing(1,0)},e.breakpoints.between(426,1440),{flexDirection:"column",height:"170px",justifyContent:"space-between"}),submit:{textTransform:"uppercase",backgroundColor:"#f04040 !important",margin:e.spacing(2,"auto",3),width:"180px",height:"50px"},dateRangeIcon:{color:"#aaa",marginRight:e.spacing(1)},hourInput:Object(x.a)({width:"160px"},e.breakpoints.between(426,1440),{width:"100%",margin:e.spacing(1,0)}),errorHelperText:{color:"red !important",margin:"0 0 8px !important"}}})),In={dateRange:[null,null]},Bn=S.c().shape({dateRange:S.a().of(S.b().typeError("Wrong Date Type").required("Required").nullable())}),Tn=function(e){var t=e.sitter,n=Sn(),r=Object(a.useState)([null,null]),i=Object(R.a)(r,2),c=i[0],o=i[1],s=Y().updateSnackBarMessage,l=z().loggedInUser,u=Object(d.g)(),p=E().socket,h=function(){var e=Object(y.a)(v.a.mark((function e(n,a){var r,i,c,d,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dateRange,i=a.setSubmitting,c=a.resetForm,!r[0]||!r[1]){e.next=23;break}if(e.prev=3,!(null===l||void 0===l?void 0:l.profileId)){e.next=10;break}return e.next=7,Nn(l.profileId,t._id,null===r||void 0===r?void 0:r[0],null===r||void 0===r?void 0:r[1]);case 7:d=e.sent,(null===(h=d.success)||void 0===h?void 0:h.newRequest)&&(null===p||void 0===p||p.emit("notification",{recipientId:t._id}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0 instanceof Error&&s(e.t0.message);case 15:return e.prev=15,e.next=18,we("Pet Sitting","".concat(t.firstName," ").concat(t.lastName,"'s Request"),"".concat(t.firstName," ").concat(t.lastName," sent a Request!"));case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(15),e.t1 instanceof Error&&s(e.t1.message);case 23:i(!1),o([null,null]),c({values:{dateRange:[null,null]}}),u.push("/listings");case 27:case"end":return e.stop()}}),e,null,[[3,12],[15,20]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(M.jsx)(C.b,{initialValues:In,validationSchema:Bn,onSubmit:h,validate:function(e){var t={};return e.dateRange&&e.dateRange[0]&&e.dateRange[1]||(t.dateRange="Please choose Date and Time."),t},children:function(e){var a=e.handleSubmit,r=e.values,i=e.touched,s=e.errors,l=e.isSubmitting;return Object(M.jsx)(Ot.b,{dateAdapter:ft.a,children:Object(M.jsx)(vt.a,{inputFormat:"dd MMM yyyy",disableMaskedInput:!0,startText:null,endText:null,value:c,onChange:function(e){return r.dateRange=e,t=r.dateRange,void o(t);var t},renderInput:function(e,u){var d,p;return Object(M.jsxs)(C.a,{onSubmit:a,className:n.bookingForm,children:[Object(M.jsx)($e.a,{component:"h5",variant:"h5",align:"center",className:n.hourlyWage,children:"$ ".concat(t.hourlyWage,"/ hr")}),Object(M.jsx)(Bt.a,{name:"read-only",value:4,readOnly:!0,className:n.rating}),Object(M.jsxs)(he.a,{display:"flex",flexDirection:"column",className:n.inputField,children:[Object(M.jsx)($e.a,{variant:"body2",className:n.label,children:"Drop In"}),Object(M.jsxs)(he.a,{display:"flex",className:n.inputField,children:[Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{InputProps:{startAdornment:Object(M.jsx)(wt.a,{className:n.dateRangeIcon}),placeholder:"Choose Date"},error:i.dateRange&&Boolean(s.dateRange)})),Object(M.jsx)(en.a,{inputFormat:"hh aaa",value:c[0],views:["hours"],onChange:function(e){return r.dateRange[0]=e,o((function(t){return[e,t[1]]}))},renderInput:function(e){return Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{className:n.hourInput,placeholder:"Choose Time",error:i.dateRange&&Boolean(s.dateRange)}))}})]})]}),Object(M.jsxs)(he.a,{display:"flex",flexDirection:"column",className:n.inputField,children:[Object(M.jsx)($e.a,{variant:"body2",className:n.label,children:"Drop Off"}),Object(M.jsxs)(he.a,{display:"flex",className:n.inputField,children:[Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},u),{},{InputProps:{startAdornment:Object(M.jsx)(wt.a,{className:n.dateRangeIcon}),placeholder:"Choose Date"},error:i.dateRange&&Boolean(s.dateRange)})),Object(M.jsx)(en.a,{inputFormat:"hh aaa",value:c[1],views:["hours"],onChange:function(e){return r.dateRange[1]=e,o((function(t){return[t[0],e]}))},renderInput:function(e){return Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},e),{},{className:n.hourInput,placeholder:"Choose Time",error:i.dateRange&&Boolean(s.dateRange)}))}})]})]}),Object(M.jsx)(wn.a,{className:n.errorHelperText,children:i.dateRange&&(s.dateRange||(null===(d=s.dateRange)||void 0===d?void 0:d[0])||(null===(p=s.dateRange)||void 0===p?void 0:p[1]))||null}),Object(M.jsx)(de.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:n.submit,children:l?Object(M.jsx)(Ke.a,{style:{color:"white"}}):"Send Request"})]})}})})}})},Rn=Object(g.a)((function(e){return{root:Object(x.a)({},e.breakpoints.down("xs"),{"& .MuiPaper-rounded":{borderRadius:0}}),bookingBox:Object(x.a)({},e.breakpoints.up("sm"),{padding:e.spacing(3,3,3,0)}),bookingContainer:Object(x.a)({},e.breakpoints.down("xs"),{width:"100vw"}),bookingForm:{padding:e.spacing(2),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},hourlyWage:{fontWeight:700,padding:e.spacing(2)},rating:{padding:e.spacing(0,0,1)},label:{fontWeight:700,textTransform:"uppercase"},inputField:{padding:e.spacing(1,0)},submit:{textTransform:"uppercase",backgroundColor:e.palette.primary.main,margin:e.spacing(2,"auto",3),width:"180px",height:"50px"},dateRangeIcon:{color:"#aaa",marginRight:e.spacing(1)},hourInput:{width:"160px"}}})),Wn=function(e){var t=e.sitter,n=Rn();return Object(M.jsx)(Ye.a,{item:!0,xs:12,sm:5,md:4,lg:4,xl:3,className:n.root,children:Object(M.jsx)(he.a,{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",className:n.bookingBox,children:Object(M.jsx)(gn.a,{elevation:6,children:Object(M.jsx)(he.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",className:n.bookingContainer,children:Object(M.jsx)(Tn,{sitter:t})})})})})},Pn=function(){var e=Object(d.i)().sitterId,t=Object(a.useState)(null),n=Object(R.a)(t,2),r=n[0],i=n[1],c=Y().updateSnackBarMessage;return Object(a.useEffect)((function(){try{(function(){var t=Object(y.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct(e);case 2:n=t.sent,i(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}catch(t){t instanceof Error&&c(t.message)}}),[e,c]),r?Object(M.jsx)(Xe,{children:Object(M.jsx)(he.a,{width:"100%",children:Object(M.jsxs)(Ye.a,{maxWidth:"2160px",container:!0,spacing:{xs:0,sm:1,md:3,lg:5,xl:10},justifyContent:"space-evenly",alignItems:"flex-start",children:[Object(M.jsx)(yn,{sitter:r}),Object(M.jsx)(Wn,{sitter:r})]})})}):Object(M.jsx)(Xe,{children:Object(M.jsx)(he.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(Ke.a,{size:100})})})},Dn=Object(g.a)((function(){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)"}},authWrapper:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",minHeight:"100vh",paddingTop:23},welcome:{fontSize:40,paddingBottom:20,color:"#000000",fontWeight:900,fontFamily:"'Open Sans'"},logoWrapper:{marginLeft:"30px"},landingWrapper:{height:"100%"}}})),Mn=Object(g.a)((function(e){return{bookingBox:Object(x.a)({},e.breakpoints.up("sm"),{padding:e.spacing(3,3,3,0)}),bookingContainer:Object(x.a)({},e.breakpoints.down("xs"),{width:"100vw"}),bookingForm:{padding:e.spacing(2),display:"flex",flexDirection:"column",justifyContent:"center"},label:{fontWeight:900,textTransform:"uppercase"},inputField:Object(x.a)({},e.breakpoints.between(426,1440),{flexDirection:"row",height:"170px",justifyContent:"space-between"}),dateInputWrapper:{display:"flex"},submit:{textTransform:"uppercase",backgroundColor:"#f04040 !important",marginTop:"20px !important",width:"180px",height:"50px",fontSize:"11px !important"},dateRangeIcon:{color:"#aaa",marginRight:e.spacing(1)},errorHelperText:{color:"red !important",margin:"0 0 8px !important"}}})),An={dateRange:[null,null]},Fn=S.c().shape({dateRange:S.a().of(S.b().typeError("Wrong Date Type").required("Required").nullable())}),En=function(){var e=Mn(),t=Object(a.useState)([null,null]),n=Object(R.a)(t,2),r=n[0],i=n[1];return Object(M.jsx)(C.b,{initialValues:An,validationSchema:Fn,onSubmit:function(e,t){e.dateRange;var n=t.setSubmitting,a=t.resetForm;n(!1),i([null,null]),a({values:{dateRange:[null,null]}})},validate:function(e){var t={};return e.dateRange&&e.dateRange[0]&&e.dateRange[1]||(t.dateRange="Please choose Date"),t},children:function(t){var n=t.handleSubmit,a=t.values,c=t.touched,o=t.errors,s=t.isSubmitting;return Object(M.jsx)(Ot.b,{dateAdapter:ft.a,children:Object(M.jsx)(vt.a,{inputFormat:"dd MMM yyyy",disableMaskedInput:!0,startText:null,endText:null,value:r,onChange:function(e){return a.dateRange=e,t=a.dateRange,void i(t);var t},renderInput:function(t,a){var r,i;return Object(M.jsxs)(C.a,{onSubmit:n,className:e.bookingForm,children:[Object(M.jsx)($e.a,{variant:"overline",display:"block",gutterBottom:!0,className:e.label,children:"Where"}),Object(M.jsx)(gt.a,{id:"outlined-basic",variant:"outlined",placeholder:"Anywhere"}),Object(M.jsx)($e.a,{variant:"overline",display:"block",gutterBottom:!0,className:e.label,children:"Drop In / Drop Off"}),Object(M.jsxs)(he.a,{className:e.dateInputWrapper,children:[Object(M.jsx)(he.a,{display:"flex",flexDirection:"column",className:e.inputField,children:Object(M.jsx)(he.a,{display:"flex",className:e.inputField,children:Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},t),{},{InputProps:{startAdornment:Object(M.jsx)(wt.a,{className:e.dateRangeIcon}),placeholder:"Choose Date"},error:c.dateRange&&Boolean(o.dateRange)}))})}),Object(M.jsx)(he.a,{display:"flex",flexDirection:"column",className:e.inputField,children:Object(M.jsx)(he.a,{display:"flex",className:e.inputField,children:Object(M.jsx)(gt.a,Object(Ge.a)(Object(Ge.a)({},a),{},{InputProps:{startAdornment:Object(M.jsx)(wt.a,{className:e.dateRangeIcon}),placeholder:"Choose Date"},error:c.dateRange&&Boolean(o.dateRange)}))})})]}),Object(M.jsx)(wn.a,{className:e.errorHelperText,children:c.dateRange&&(o.dateRange||(null===(r=o.dateRange)||void 0===r?void 0:r[0])||(null===(i=o.dateRange)||void 0===i?void 0:i[1]))||null}),Object(M.jsx)(de.a,{type:"submit",size:"large",variant:"contained",color:"primary",className:e.submit,children:s?Object(M.jsx)(Ke.a,{style:{color:"white"}}):"Find my dog sitter"})]})}})})}})};function Un(){var e=Dn();return Object(M.jsxs)(j.a,{className:e.authWrapper,children:[Object(M.jsx)(j.a,{className:e.logoWrapper,children:Object(M.jsx)("img",{src:ee,alt:"logo"})}),Object(M.jsxs)(j.a,{width:"100%",maxWidth:450,p:3,alignSelf:"center",children:[Object(M.jsx)(m.a,{container:!0,children:Object(M.jsx)(m.a,{item:!0,xs:!0,children:Object(M.jsx)(b.a,{className:e.welcome,component:"h1",variant:"h5",children:"Find the care your dog deserves"})})}),Object(M.jsx)(En,{})]}),Object(M.jsx)(j.a,{p:1,alignSelf:"center"})]})}var Hn=n.p+"static/media/landing-dog-sqr.6f472b8a.jpg",zn=Object(g.a)((function(e){return{root:{minHeight:"100vh","& .MuiInput-underline:before":{borderBottom:"1.2px solid rgba(0, 0, 0, 0.2)"}},imageSideWrapper:{backgroundImage:"url(".concat(Hn,")"),width:"100%",height:"100%",backgroundSize:"cover",display:"flex",alignItems:"flex-end",flexDirection:"column"},authHeader:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",width:"400px",marginRight:"50px",flexDirection:"row",paddingTop:23},link:{margin:"0px"},sitter:{textDecoration:"underline"},login:{borderColor:"white"},signup:{backgroundColor:"#f04040 !important",fontSize:"11px !important"},button:{textTransform:"uppercase",padding:"10px 5px",color:"white",width:"115px"}}})),Ln=n(628);function qn(){var e=zn();return Object(M.jsx)(j.a,{className:e.imageSideWrapper,display:{xs:"none",lg:"block"},children:Object(M.jsxs)(j.a,{p:1,className:e.authHeader,children:[Object(M.jsx)(Ln.a,{children:Object(M.jsx)(N.a,{className:"".concat(e.sitter," ").concat(e.button),children:"Become a sitter"})}),Object(M.jsx)(Ln.a,{children:Object(M.jsx)(N.a,{variant:"outlined",className:"".concat(e.login," ").concat(e.button),children:"Login"})}),Object(M.jsx)(Ln.a,{className:e.link,children:Object(M.jsx)(N.a,{className:"".concat(e.signup," ").concat(e.button),variant:"contained",color:"primary",children:"Sign Up"})})]})})}function Vn(){var e=Dn();return Object(M.jsxs)(m.a,{container:!0,component:"main",className:e.root,children:[Object(M.jsx)(p.a,{}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:7,md:6,component:h.a,square:!0,children:Object(M.jsx)(Un,{})}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:5,md:6,component:h.a,square:!0,children:Object(M.jsx)(j.a,{className:e.landingWrapper,display:{xs:"none",lg:"block"},children:Object(M.jsx)(qn,{})})})]})}var Gn=n(643),Jn=Object(g.a)((function(e){return Object(je.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",minWidth:400},title:{fontWeight:900},footerWrap:{display:"flex",justifyContent:"center",marginTop:"20px"},pageWrap:{margin:"auto",maxWidth:"30%",padding:"20px"}})}));function Kn(){var e=Jn(),t=Object(a.useState)([]),n=Object(R.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(1),o=Object(R.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(1),d=Object(R.a)(u,2),p=d[0],m=d[1];return Object(a.useEffect)((function(){(function(){var e=Object(y.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(s,20,null);case 2:if(t=e.sent,(n=t.notifications)&&i(n),!((a=n.filter((function(e){return!e.read})).map((function(e){return e._id}))).length<=0)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Ce(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(a.useEffect)((function(){(function(){var e=Object(y.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(null);case 2:(t=e.sent)&&(20,n=Math.ceil(t.count/20),m(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(M.jsx)(Xe,{children:Object(M.jsx)(j.a,{className:"".concat(e.root," ").concat(e.pageWrap),children:Object(M.jsx)(h.a,{className:e.paper,children:r.length?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Oe,{messagesToShow:r}),Object(M.jsx)(j.a,{className:e.footerWrap,children:Object(M.jsx)(Gn.a,{count:p,page:s,onChange:function(e,t){l(t)}})})]}):Object(M.jsx)(j.a,{children:Object(M.jsx)(b.a,{variant:"subtitle1",className:e.title,children:"No notifications."})})})})})}var Yn=Object(g.a)((function(e){return{search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"#E9EEF9",marginLeft:0,height:"50px",lineHeight:"18px",width:"calc(".concat(240," - 2rem)")},searchRoot:{color:"inherit",width:"100%",height:"100%"},searchInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),width:"100%",fontWeight:600},searchIcon:{height:"100%",position:"absolute",pointerEvents:"none",marginLeft:"1rem",display:"flex",alignItems:"center",justifyContent:"center"}}})),Zn=n(325),Qn=n(641);function Xn(e){return _n.apply(this,arguments)}function _n(){return(_n=Object(y.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.search,a={method:"GET",credentials:"include"},e.next=4,fetch("/users?search=".concat(n),a).then((function(e){return e.json()})).catch((function(){return{error:{message:"Unable to connect to server. Please try again"}}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $n=function(e){var t=e.search,n=e.handleChange,r=Object(a.useState)(!1),i=Object(R.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)([]),l=Object(R.a)(s,2),u=l[0],d=l[1],p=Object(a.useState)(!1),h=Object(R.a)(p,2),j=h[0],m=h[1],b=Object(it.a)(t,500),x=Object(R.a)(b,1)[0],g=Yn(),f=function(e){d(e)};return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(y.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,Xn({search:x});case 3:n=t.sent,e&&n&&n.users&&f(n.users),m(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[x]),Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(M.jsx)(Qn.a,{id:"asynchronous-search",open:c,onOpen:function(){o(!0)},onClose:function(){o(!1)},getOptionSelected:function(e,t){return e.username===t.username},getOptionLabel:function(e){return e.username},options:u,loading:j,onInputChange:n,inputValue:t,noOptionsText:"No Users Found",freeSolo:!0,renderInput:function(e){return Object(M.jsx)("div",{className:g.search,children:Object(M.jsx)(Zn.a,Object(Ge.a)(Object(Ge.a)({},e.inputProps),{},{placeholder:"Search",classes:{root:g.searchRoot,input:g.searchInput},inputProps:{"aria-label":"search",ref:e.InputProps.ref},startAdornment:Object(M.jsx)("div",{className:g.searchIcon,children:Object(M.jsx)(rt.a,{})})}))})}})})},ea=n(629),ta=n(4),na=Object(g.a)((function(e){return{avatar:{padding:e.spacing(2,1.5,2,0)},onlineBadge:{top:25,right:5,height:13,width:13,borderRadius:"50%",border:"2px solid white",backgroundColor:"#1CED84"},onlineActiveChatBadge:{top:34,right:8,height:13,width:13,borderRadius:"50%",border:"2px solid white",backgroundColor:"#1CED84"},profilePic:{height:45,width:45,border:"1px solid #ccc"},activeChatPic:{height:55,width:55,border:"1px solid #ccc"}}})),aa=function(e){var t,n=e.fullName,a=e.profileImg,r=e.small,i=e.isOnline,c=e.customClasses,o=na();return Object(M.jsx)(j.a,{className:"".concat(o.avatar," ").concat(c),children:Object(M.jsx)(ea.a,{classes:{badge:Object(ta.a)((t={},Object(x.a)(t,o.onlineBadge,i&&r),Object(x.a)(t,o.onlineActiveChatBadge,i&&!r),t))},variant:"dot",anchorOrigin:{horizontal:"right",vertical:"bottom"},children:Object(M.jsx)(ie.a,{alt:n,src:a,className:"".concat(r?o.profilePic:o.activeChatPic)})})})},ra=n(240),ia=n.n(ra),ca=Object(g.a)((function(e){return{chatBoxContent:{margin:e.spacing(1,2,0,.5),flexGrow:1},chatInfo:Object(x.a)({width:"calc(100% - 72px)"},e.breakpoints.down("sm"),{width:"100%"}),username:{fontSize:16,fontWeight:700,textTransform:"capitalize",marginBottom:e.spacing(.5)},previewText:{color:"#9CADC8",height:18,overflow:"hidden"},boldingText:{fontSize:13,fontWeight:700,color:"Black"},smallScreenTime:Object(x.a)({width:"72px",color:"#9CADC8",textAlign:"right"},e.breakpoints.up("md"),{display:"none"}),timeInfo:Object(x.a)({},e.breakpoints.down("sm"),{display:"none"}),receivedTime:{width:"72px",color:"#9CADC8"}}})),oa=function(e){var t=e.fullName,n=e.latestMessage,a=ca();return Object(M.jsxs)(j.a,{display:"flex",justifyContent:"space-between",className:a.chatBoxContent,children:[Object(M.jsxs)(j.a,{className:a.chatInfo,children:[Object(M.jsxs)(j.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(M.jsx)(b.a,{variant:"h6",className:a.username,children:t}),Object(M.jsx)(b.a,{className:a.smallScreenTime,children:ia()(null===n||void 0===n?void 0:n.createdAt).format("HH:mm")})]}),Object(M.jsx)(b.a,{variant:"body2",className:a.previewText,children:null===n||void 0===n?void 0:n.text})]}),Object(M.jsx)(j.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",className:a.timeInfo,children:Object(M.jsx)(b.a,{variant:"body2",className:a.receivedTime,align:"right",children:ia()(null===n||void 0===n?void 0:n.createdAt).format("HH:mm[\n]A")})})]})},sa=Object(g.a)((function(e){return{chatBox:Object(x.a)({outline:"1px solid #eee",marginBottom:"1px",paddingLeft:e.spacing(2),"&:hover":{backgroundColor:"#E9EEF9",cursor:"pointer"}},e.breakpoints.down("xs"),{outline:"none"})}})),la=function(){return Object(M.jsx)(j.a,{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:Object(M.jsx)(I.a,{size:100})})},ua=function(e){var t=e.conversation,n=sa(),a=t.latestMessage,r=t.otherUserProfile||{},i=r.firstName,c=r.lastName,o=r.photos,s=Ve().toggleDrawer;return t?Object(M.jsxs)(j.a,{height:"90px",display:"flex",alignItems:"center",className:n.chatBox,onClick:s(!0,t._id),children:[Object(M.jsx)(aa,{isOnline:!0,small:!0,fullName:"".concat(i," ").concat(c),profileImg:o?o[1]:"https://robohash.org/defaultAvatarImage.png"}),Object(M.jsx)(oa,{fullName:"".concat(i," ").concat(c),latestMessage:a})]}):Object(M.jsx)(la,{})},da=Object(g.a)((function(e){return{chatSideBanner:Object(x.a)({height:"100%",borderRight:"1px solid #eee"},e.breakpoints.down("xs"),{border:"none"}),chatSideBannerBox:Object(x.a)({padding:e.spacing(2),borderBottom:"1px solid #eee"},e.breakpoints.down("xs"),{border:"none"}),inboxMessages:Object(x.a)({fontWeight:700,margin:e.spacing(0,0,2,.5)},e.breakpoints.down("sm"),{display:"none"})}})),pa=function(e){var t=e.conversations,n=Object(a.useState)("test"),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(null),s=Object(R.a)(o,2),l=s[0],u=s[1],d=da();return t?Object(M.jsx)(m.a,{item:!0,sm:4,className:d.chatSideBanner,children:Object(M.jsxs)(j.a,{display:"flex",flexDirection:"column",children:[Object(M.jsxs)(j.a,{className:d.chatSideBannerBox,children:[Object(M.jsx)(b.a,{className:d.inboxMessages,variant:"h5",children:"Inbox Messages"}),Object(M.jsx)($n,{search:i,handleChange:function(e,t){c(t),l&&u(null)}})]}),null===t||void 0===t?void 0:t.map((function(e){return Object(M.jsx)(ua,{conversation:e},e._id)}))]})}):Object(M.jsx)(la,{})},ha=n(630),ja=n(631),ma=Object(g.a)((function(e){var t;return{activeChatHeader:(t={display:"flex",alignItems:"center",justifyContent:"space-between",height:125,paddingRight:e.spacing(3),borderBottom:"1px solid #eee"},Object(x.a)(t,e.breakpoints.down("sm"),{height:"82px"}),Object(x.a)(t,e.breakpoints.down("xs"),{width:"100vw"}),t),mobileActiveChatHeader:Object(x.a)({backgroundColor:"#fff"},e.breakpoints.up("sm"),{display:"none"}),content:{display:"flex",alignItems:"center",marginLeft:e.spacing(3)},username:Object(x.a)({textTransform:"capitalize",fontWeight:700,margin:e.spacing(0,1.5)},e.breakpoints.down("sm"),{color:"black"}),ellipsis:{color:"#0a0a0a",marginRight:e.spacing(3),opacity:.5}}})),ba=function(e){var t=e.fullName,n=e.profileImg,a=e.isOnline,r=ma(),i=Object(M.jsxs)(j.a,{className:r.activeChatHeader,children:[Object(M.jsxs)(j.a,{className:r.content,children:[Object(M.jsx)(aa,{small:!1,isOnline:a,fullName:t,profileImg:n}),Object(M.jsx)(b.a,{variant:"h5",className:r.username,children:t})]}),Object(M.jsx)(ae.a,{classes:{root:r.ellipsis}})]});return Object(M.jsxs)(M.Fragment,{children:[i,Object(M.jsx)(ha.a,{className:r.mobileActiveChatHeader,children:Object(M.jsx)(ja.a,{children:i})})]})},xa=Object(g.a)((function(e){return{form:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1,2),borderTop:"1px solid #eee"},input:{height:"100px",display:"flex",justifyContent:"center",padding:e.spacing(2),marginRight:e.spacing(2)},sendBtn:{fontSize:"14px",width:"150px",height:"50px",padding:e.spacing(2),margin:e.spacing(0,4,0,0)}}})),ga=function(e){var t=e.conversationId,n=e.recipientProfileId,a=xa(),r=Ve().sendMessageContenxt,i=function(){var e=Object(y.a)(v.a.mark((function e(a,i){var c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.setSubmitting,o=i.resetForm,e.next=3,r(a);case 3:c(!1),o({values:{conversationId:t,text:"",recipientProfileId:n,recipientRead:!1}});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(M.jsx)(C.b,{initialValues:{conversationId:t,text:"",recipientProfileId:n,recipientRead:!1},validationSchema:S.c().shape({text:S.d().required("Text is required")}),onSubmit:i,enableReinitialize:!0,children:function(e){var t=e.handleSubmit,n=e.handleChange,r=e.values,i=e.touched,c=e.errors,o=e.isSubmitting;return Object(M.jsxs)(C.a,{onSubmit:t,noValidate:!0,className:a.form,children:[Object(M.jsx)(k.a,{className:a.input,id:"text",fullWidth:!0,name:"text",autoComplete:"text",helperText:i.text?c.text:"",error:i.text&&Boolean(c.text),value:r.text,onChange:n,placeholder:"Send Message"}),Object(M.jsx)(N.a,{type:"submit",size:"medium",variant:"contained",color:"primary",className:a.sendBtn,children:o?Object(M.jsx)(I.a,{style:{color:"white"}}):"Send"})]})}})},fa=Object(g.a)((function(e){return{senderBubbleBox:{display:"flex",flexDirection:"column",alignItems:"flex-end",padding:e.spacing(2,0)},bubble:{maxWidth:"400px",padding:e.spacing(.5,2),borderRadius:"12px"},text:{fontSize:"14px",padding:e.spacing(1),fontWeight:700}}})),Oa=function(e){var t=e.text,n=fa();return Object(M.jsx)(j.a,{className:n.senderBubbleBox,children:Object(M.jsx)(h.a,{elevation:1,className:n.bubble,children:Object(M.jsx)(b.a,{className:n.text,children:t})})})},va=Object(g.a)((function(e){return{otherUserBubbleBox:Object(x.a)({display:"flex",padding:e.spacing(2,0,2,3)},e.breakpoints.down("xs"),{padding:e.spacing(2,0)}),otherUserAvatar:{padding:e.spacing(0),marginRight:e.spacing(2)},bubble:{maxWidth:"400px",padding:e.spacing(.5,2),borderRadius:"12px",backgroundColor:"#E9EEF9"},text:{padding:e.spacing(1)}}})),ya=function(e){var t=e.text,n=e.otherUserProfile,a=va(),r=(n||{}).photos;return Object(M.jsxs)(j.a,{className:a.otherUserBubbleBox,children:[Object(M.jsx)(aa,{small:!0,profileImg:r?r[1]:"https://robohash.org/defaultAvatarImage.png",customClasses:a.otherUserAvatar}),Object(M.jsx)(h.a,{elevation:1,className:a.bubble,children:Object(M.jsx)(b.a,{className:a.text,children:t})})]})},wa=Object(g.a)((function(e){return{activeChatMessages:{overflow:"auto",flexGrow:1,padding:e.spacing(1,3,3)}}})),Na=function(e){var t=e.messages,n=e.userId,r=e.otherUserProfile,i=wa(),c=Object(a.useRef)(null);return Object(a.useEffect)((function(){c.current&&c.current.scrollIntoView(!0)}),[t]),t?Object(M.jsxs)(j.a,{width:"100%",className:i.activeChatMessages,children:[null===t||void 0===t?void 0:t.map((function(e){var t;return(null===e||void 0===e||null===(t=e.senderProfile)||void 0===t?void 0:t.userId)===n?Object(M.jsx)(j.a,{children:Object(M.jsx)(Oa,{text:e.text},e._id)},e._id):Object(M.jsx)(ya,{text:e.text,otherUserProfile:r},e._id)})),Object(M.jsx)(j.a,{ref:c})]}):Object(M.jsx)(la,{})},ka=Object(g.a)((function(e){return{activeChat:Object(x.a)({height:"100%"},e.breakpoints.down("xs"),{display:"none"}),activeChatOuterBox:{height:"100%"},chatContainer:Object(x.a)({height:"calc(100% - ".concat("125px",")")},e.breakpoints.down("xs"),{height:"calc(100vh - ".concat("82px",")")}),mobileActiveChat:Object(x.a)({},e.breakpoints.up("sm"),{display:"none"})}})),Ca=function(e){var t=e.userId,n=ka(),a=Ve(),r=a.activeConvo,i=a.mobileOpen,c=a.toggleDrawer,o=r||{},s=o.conversationId,l=o.messages,u=o.otherUserProfile,d=u||{},p=d._id,h=d.firstName,b=d.lastName,x=d.photos,g=Object(M.jsx)(M.Fragment,{children:u&&s&&p&&Object(M.jsxs)(j.a,{className:n.activeChatOuterBox,children:[Object(M.jsx)(ba,{fullName:"".concat(h," ").concat(b),profileImg:x?x[1]:"https://robohash.org/defaultAvatarImage.png",isOnline:!0}),Object(M.jsxs)(j.a,{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",className:n.chatContainer,children:[Object(M.jsx)(Na,{messages:l,userId:t,otherUserProfile:u}),Object(M.jsx)(ga,{conversationId:s,recipientProfileId:p})]})]})});return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{item:!0,sm:8,className:n.activeChat,children:g}),Object(M.jsx)(At.a,{className:n.mobileActiveChat,anchor:"right",open:i,onClose:c(!1,s),onOpen:c(!0,s),children:Object(M.jsxs)(j.a,{width:"100vw",role:"presentation",children:[!l&&Object(M.jsx)(la,{}),g]})})]})},Sa=function(){var e=z().loggedInUser,t=Ve().conversations;return Object(M.jsx)(Xe,{children:(null===e||void 0===e?void 0:e.id)&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(pa,{conversations:t}),Object(M.jsx)(Ca,{userId:null===e||void 0===e?void 0:e.id})]})})},Ia=n(632),Ba=Object(g.a)((function(e){return Object(je.a)({root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},mt:{marginTop:"50px"},container:{backgroundColor:"rgb(250,250,251)",padding:"35px",height:"100vh"},calendarWrap:{height:"100%"}})})),Ta=n(311);n(504);function Ra(e){var t=e.currentBookings,n=Ba(),r=t.map((function(e){return new Date(e.startDate)})),i=Object(a.useState)(r),c=Object(R.a)(i,2),o=c[0],s=c[1];return Object(M.jsx)(j.a,{className:n.calendarWrap,children:Object(M.jsx)(Ta.Calendar,{className:"red",multiple:!0,value:o,onChange:s})})}var Wa=n(608),Pa=n(312),Da=n.n(Pa),Ma=Object(g.a)((function(e){return Object(je.a)({typography:{padding:e.spacing(2)},icon:{fontSize:"15px",color:e.palette.text.secondary},popoverWrapper:{display:"flex",flexDirection:"column"}})}));function Aa(e){var t=e.requestId,n=e.updateStatusState,a=e.sectionName,i=Ma(),c=r.a.useState(null),o=Object(R.a)(c,2),s=o[0],l=o[1],u=z().loggedInUser,d=function(){l(null)},p=function(){var e=Object(y.a)(v.a.mark((function e(r){var i,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(r,t);case 2:i=e.sent,(c=i.success)&&(o=c.request._id,"next booking"===a?n(o,r,"nextBooking"):"current bookings"===a?n(o,r,"currentBookings"):"past bookings"===a&&n(o,r,"pastBookings"),d());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Boolean(s),m=h?"simple-popover":void 0;return Object(M.jsxs)(j.a,{children:[Object(M.jsx)(b.a,{onClick:function(e){l(e.currentTarget)},children:Object(M.jsx)(Da.a,{className:i.icon})}),Object(M.jsx)(Wa.a,{id:m,open:h,anchorEl:s,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(M.jsx)(j.a,{className:i.popoverWrapper,children:(null===u||void 0===u?void 0:u.isSitter)?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N.a,{onClick:function(){return p("accepted")},children:"Accept"}),Object(M.jsx)(N.a,{onClick:function(){return p("declined")},children:"Decline"})]}):Object(M.jsx)(N.a,{children:"Edit"})})})]})}function Fa(e){var t=e.endTime,n=e.startTime,a=Object(g.a)((function(e){return Object(je.a)({BookingSubHr:{fontWeight:600,fontSize:"12px",color:"black"}})}))(),r=t?new Date(t):new Date,i=n?new Date(n):new Date,c={year:"numeric",month:"short",day:"numeric",hour:"numeric",minutes:"numeric"},o=r.toLocaleDateString("en-US",c),s=i.toLocaleDateString("en-US",c);return Object(M.jsxs)(j.a,{children:[Object(M.jsx)(b.a,{variant:"body2",color:"textSecondary",children:"From"}),Object(M.jsx)(b.a,{variant:"body2",gutterBottom:!0,className:a.BookingSubHr,children:s}),Object(M.jsx)(b.a,{variant:"body2",color:"textSecondary",children:"To"}),Object(M.jsx)(b.a,{variant:"body2",gutterBottom:!0,className:a.BookingSubHr,children:o})]})}var Ea=Object(g.a)((function(e){return Object(je.a)({paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},wrapper:{textAlign:"left",marginBottom:"15px"},sectionHr:{fontWeight:900,fontSize:"9px",color:e.palette.text.primary,marginBottom:"10px",marginTop:"10px",textTransform:"uppercase"},nextBookSubHr:{fontWeight:600,fontSize:"16px",color:e.palette.text.primary},nextBookNameHr:{fontWeight:900,fontSize:"13px",color:e.palette.text.primary},nextBookNameWrapper:{display:"flex",marginBottom:"15px"},tempImg:{borderRadius:"50%",width:"20px",marginRight:"10px",backgroundColor:e.palette.background.default},icon:{fontSize:"15px",color:e.palette.text.secondary}})}));function Ua(e){var t=e.nextBooking,n=e.updateStatusState,a=Ea();return Object(M.jsx)(j.a,{className:a.wrapper,children:Object(M.jsx)(h.a,{className:a.paper,children:Object(M.jsx)(m.a,{container:!0,spacing:2,children:Object(M.jsxs)(m.a,{item:!0,xs:12,sm:!0,container:!0,children:[Object(M.jsxs)(m.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(M.jsxs)(m.a,{item:!0,xs:!0,children:[Object(M.jsx)(b.a,{variant:"body2",gutterBottom:!0,className:a.sectionHr,children:"your next booking"}),t.startDate?Object(M.jsx)(Fa,{endTime:t.startDate,startTime:t.startDate}):Object(M.jsx)(b.a,{gutterBottom:!0,variant:"subtitle1",children:"No upcoming booking"})]}),Object(M.jsx)(m.a,{item:!0,children:Object(M.jsxs)(b.a,{variant:"body2",className:a.nextBookNameWrapper,children:[Object(M.jsx)(j.a,{className:a.tempImg}),Object(M.jsx)(j.a,{className:a.nextBookNameHr,children:null===t||void 0===t?void 0:t.sitterId})]})})]}),Object(M.jsx)(m.a,{item:!0,children:Object(M.jsx)(Aa,{sectionName:"next booking",updateStatusState:n,requestId:null===t||void 0===t?void 0:t._id})})]})})})})}var Ha=n(206),za=Object(g.a)((function(e){return Object(je.a)({red:{color:e.palette.getContrastText(Ha.a[500]),backgroundColor:Ha.a[500]},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},text:{textAlign:"left"},sectionHr:{fontWeight:900,fontSize:"9px",color:e.palette.text.primary,marginTop:"8px",textTransform:"uppercase"},sectionWrapper:{marginBottom:"-10px"},BookingSubHr:{fontWeight:600,fontSize:"12px",color:e.palette.text.primary,margin:"10px 0px"},bookingNameHr:{fontWeight:700,marginLeft:"8px",fontSize:"13px"},nameWrapper:{display:"flex",marginBottom:"15px",alignItems:"center"},tempImg:{borderRadius:"50%",width:"20px",marginRight:"10px",backgroundColor:e.palette.background.default},paperOutlineWrap:{marginBottom:"7px",padding:"5px 10px"},iconWrapper:{display:"flex",justifyContent:"flex-end"},statusWrapper:{display:"flex",alignItems:"center",fontSize:"8px",fontWeigth:"900"},statusTxt:{fontSize:"10px",color:e.palette.text.secondary,fontWeight:900}})}));function La(e){var t=e.bookings,n=e.sectionName,a=e.updateStatusState,r=za(),i=z().loggedInUser;return Object(M.jsx)(m.a,{container:!0,spacing:2,children:Object(M.jsx)(m.a,{item:!0,xs:12,sm:!0,container:!0,children:Object(M.jsxs)(m.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(M.jsx)(m.a,{item:!0,xs:!0,className:r.sectionWrapper,children:Object(M.jsx)(b.a,{variant:"body2",gutterBottom:!0,className:r.sectionHr,children:n})}),Object(M.jsx)(m.a,{item:!0,children:t.map((function(e){var t,c,o,s,l,u;return Object(M.jsx)(h.a,{variant:"outlined",className:r.paperOutlineWrap,children:Object(M.jsxs)(m.a,{item:!0,container:!0,xs:12,sm:!0,children:[Object(M.jsxs)(m.a,{item:!0,xs:9,children:[Object(M.jsx)(Fa,{endTime:e.startDate,startTime:e.startDate}),Object(M.jsx)(j.a,{className:r.nameWrapper,children:(null===i||void 0===i?void 0:i.isSitter)?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ie.a,{alt:null===e||void 0===e||null===(t=e.ownerId)||void 0===t?void 0:t.firstName,className:r.red,src:null===e||void 0===e||null===(c=e.sitterId)||void 0===c?void 0:c.photos[1]}),Object(M.jsx)(j.a,{className:r.bookingNameHr,children:null===e||void 0===e||null===(o=e.ownerId)||void 0===o?void 0:o.firstName})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ie.a,{alt:null===e||void 0===e||null===(s=e.ownerId)||void 0===s?void 0:s.firstName,className:r.red,src:null===e||void 0===e||null===(l=e.sitterId)||void 0===l?void 0:l.photos[1]}),Object(M.jsx)(j.a,{className:r.bookingNameHr,children:null===e||void 0===e||null===(u=e.sitterId)||void 0===u?void 0:u.firstName})]})})]}),Object(M.jsx)(m.a,{item:!0,xs:2,className:r.statusWrapper,children:Object(M.jsx)(b.a,{variant:"subtitle1",className:r.statusTxt.toUpperCase(),children:e.status})}),Object(M.jsx)(m.a,{item:!0,xs:1,className:r.iconWrapper,children:Object(M.jsx)(Aa,{sectionName:n,updateStatusState:a,requestId:e._id})})]})},e._id)}))})]})})})}function qa(e){var t=e.pastBookings,n=e.currentBookings,a=e.updateStatusState,r=za();return Object(M.jsx)(j.a,{className:r.text,children:Object(M.jsxs)(h.a,{className:r.paper,children:[Object(M.jsx)(La,{updateStatusState:a,sectionName:"current bookings",bookings:n}),Object(M.jsx)(La,{updateStatusState:a,sectionName:"past bookings",bookings:t})]})})}function Va(){var e=Ba(),t=Object(a.useState)({nextBooking:{},currentBookings:[],pastBookings:[]}),n=Object(R.a)(t,2),r=n[0],i=n[1],c=function(e){return e.resModel},o=Y().updateSnackBarMessage,s=function(e,t,n){var a,c=Object(Ge.a)({},r);if(e===(null===(a=c.nextBooking)||void 0===a?void 0:a._id))return c.nextBooking.status=t,void i(c);var o=c[n].findIndex((function(t){return t._id===e}));return o>=0?(c[n][o].status=t,void i(c)):void 0};return Object(a.useEffect)((function(){try{(function(){var e=Object(y.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn();case 2:(t=e.sent)&&(n=c(t))&&i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){e instanceof Error&&o(e.message)}}),[o]),Object(M.jsx)(Xe,{children:Object(M.jsx)(Ia.a,{maxWidth:"md",className:e.container,children:Object(M.jsx)(j.a,{className:"".concat(e.root," ").concat(e.mt),children:Object(M.jsxs)(m.a,{container:!0,spacing:8,children:[Object(M.jsxs)(m.a,{item:!0,xs:12,sm:6,spacing:2,children:[Object(M.jsx)(Ua,{nextBooking:r.nextBooking,updateStatusState:s}),Object(M.jsx)(qa,{currentBookings:r.currentBookings,pastBookings:r.pastBookings,updateStatusState:s})]}),Object(M.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(M.jsx)(Ra,{currentBookings:r.currentBookings})})]})})})})}n(505);var Ga=function(){return Object(M.jsx)(o.a,{theme:l,children:Object(M.jsx)(u.a,{children:Object(M.jsx)(F,{children:Object(M.jsx)(K,{children:Object(M.jsx)(H,{children:Object(M.jsxs)(d.d,{children:[Object(M.jsx)(d.b,{exact:!0,path:"/login",component:We}),Object(M.jsx)(d.b,{exact:!0,path:"/signup",component:Fe}),Object(M.jsx)(Je,{exact:!0,path:"/dashboard",component:_e}),Object(M.jsx)(d.b,{exact:!0,path:"/listings",component:Mt}),Object(M.jsx)(d.b,{path:"/listings/:sitterId",component:Pn}),Object(M.jsx)(d.b,{exact:!0,path:"/profile",component:xn}),Object(M.jsx)(d.b,{path:"/profile/:setting",component:xn}),Object(M.jsx)(d.b,{exact:!0,path:"/notifications",component:Kn}),Object(M.jsx)(d.b,{exact:!0,path:"/bookings",component:Va}),Object(M.jsx)(d.b,{exact:!0,path:"/",component:Vn}),Object(M.jsx)(qe,{children:Object(M.jsx)(d.b,{exact:!0,path:"/messages",component:Sa})}),Object(M.jsx)(d.b,{path:"*",children:Object(M.jsx)(d.a,{to:"/login"})})]})})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(M.jsx)(Ga,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[506,1,2]]]);
//# sourceMappingURL=main.4a9185d9.chunk.js.map